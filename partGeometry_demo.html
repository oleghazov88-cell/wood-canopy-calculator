<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Part Geometry Demo</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 5px;
            font-size: 14px;
            max-width: 300px;
            z-index: 100;
        }
        #info h2 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }
        #info p {
            margin: 5px 0;
            line-height: 1.4;
        }
        .highlight {
            color: #4fc3f7;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="info">
        <h2>ğŸ”§ Part Geometry Demo</h2>
        <p><span class="highlight">Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº:</span> raskos/r2.glb</p>
        <p><span class="highlight">Ğ’ĞµÑ€ÑˆĞ¸Ğ½Ñ‹:</span> 162</p>
        <p><span class="highlight">Ğ¢Ñ€ĞµÑƒĞ³Ğ¾Ğ»ÑŒĞ½Ğ¸ĞºĞ¸:</span> 100</p>
        <p><span class="highlight">Ğ Ğ°Ğ·Ğ¼ĞµÑ€:</span> ~16KB</p>
        <p style="margin-top: 10px; font-size: 12px;">
            âœ“ Ğ“ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ° Ğ¸Ğ· Ñ‡Ğ¸ÑÑ‚Ğ¾Ğ³Ğ¾ JS ĞºĞ¾Ğ´Ğ°<br>
            âœ“ Ğ‘ĞµĞ· Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ GLTFLoader<br>
            âœ“ ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°
        </p>
    </div>

    <script type="importmap">
    {
        "imports": {
            "three": "./naves-calc/assets/libs/three/three.module.min.js",
            "three/addons/": "./naves-calc/assets/libs/three/"
        }
    }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from './naves-calc/assets/libs/three/OrbitControls.js';
        import { createPartMesh } from './naves-calc/assets/js/partGeometry.js';

        // Ğ¡Ñ†ĞµĞ½Ğ°
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x1a1a2e);

        // ĞšĞ°Ğ¼ĞµÑ€Ğ°
        const camera = new THREE.PerspectiveCamera(
            75,
            window.innerWidth / window.innerHeight,
            0.1,
            1000
        );
        camera.position.set(15, 10, 15);
        camera.lookAt(0, 8, 8);

        // Ğ ĞµĞ½Ğ´ĞµÑ€ĞµÑ€
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        document.body.appendChild(renderer.domElement);

        // ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»Ñ‹
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.target.set(0, 8, 8);

        // ĞÑĞ²ĞµÑ‰ĞµĞ½Ğ¸Ğµ
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(20, 30, 10);
        directionalLight.castShadow = true;
        directionalLight.shadow.camera.left = -20;
        directionalLight.shadow.camera.right = 20;
        directionalLight.shadow.camera.top = 20;
        directionalLight.shadow.camera.bottom = -20;
        scene.add(directionalLight);

        // Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ»Ğ¸Ğ½Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ¾Ñ€Ğ¸ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸
        const gridHelper = new THREE.GridHelper(40, 40, 0x444444, 0x222222);
        scene.add(gridHelper);

        const axesHelper = new THREE.AxesHelper(10);
        scene.add(axesHelper);

        // Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¼ĞµÑˆ Ğ¸Ğ· partGeometry.js
        console.log('Creating mesh from partGeometry.js...');
        const startTime = performance.now();
        
        const mesh = createPartMesh();
        mesh.castShadow = true;
        mesh.receiveShadow = true;
        
        const endTime = performance.now();
        console.log(`âœ“ Mesh created in ${(endTime - startTime).toFixed(2)}ms`);
        console.log('Mesh:', mesh);
        console.log('Geometry:', mesh.geometry);
        console.log('Material:', mesh.material);

        // ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¼ĞµÑˆ Ğ² Ñ†ĞµĞ½Ñ‚Ñ€
        mesh.position.set(0, 0, 0);
        scene.add(mesh);

        // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ wireframe copy Ğ´Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞµĞ¹ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
        const wireframeGeometry = mesh.geometry.clone();
        const wireframeMaterial = new THREE.MeshBasicMaterial({
            color: 0x00ff00,
            wireframe: true,
            transparent: true,
            opacity: 0.1
        });
        const wireframeMesh = new THREE.Mesh(wireframeGeometry, wireframeMaterial);
        wireframeMesh.position.copy(mesh.position);
        scene.add(wireframeMesh);

        // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¿Ğ¾Ğ» Ğ´Ğ»Ñ Ñ‚ĞµĞ½ĞµĞ¹
        const planeGeometry = new THREE.PlaneGeometry(50, 50);
        const planeMaterial = new THREE.ShadowMaterial({ opacity: 0.3 });
        const plane = new THREE.Mesh(planeGeometry, planeMaterial);
        plane.rotation.x = -Math.PI / 2;
        plane.position.y = -1;
        plane.receiveShadow = true;
        scene.add(plane);

        // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ğ¾ĞºĞ½Ğ°
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ
        function animate() {
            requestAnimationFrame(animate);
            
            // ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾Ğµ Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑˆĞ°
            mesh.rotation.y += 0.005;
            wireframeMesh.rotation.y += 0.005;
            
            controls.update();
            renderer.render(scene, camera);
        }

        animate();

        // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ
        console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   Part Geometry Demo - Successfully    â•‘
â•‘              Loaded!                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Source: raskos/r2.glb                  â•‘
â•‘ Vertices: ${mesh.geometry.attributes.position.count.toString().padEnd(28)}â•‘
â•‘ Triangles: ${(mesh.geometry.index.count / 3).toString().padEnd(27)}â•‘
â•‘ Material: MeshStandardMaterial         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        `);
    </script>
</body>
</html>





