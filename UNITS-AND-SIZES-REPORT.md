# üìê –ï–î–ò–ù–ò–¶–´ –ò–ó–ú–ï–†–ï–ù–ò–Ø –ò –†–ê–ó–ú–ï–†–´ - –°–¢–û–õ–ë–´ –ò –†–ê–°–ö–û–°–´

## üéØ **–ï–î–ò–ù–ò–¶–´ –ò–ó–ú–ï–†–ï–ù–ò–Ø –í –ö–û–î–ï**

–í—Å—è 3D –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ú–ï–¢–†–´** –∫–∞–∫ –±–∞–∑–æ–≤—É—é –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è Three.js.

---

## üìä **–°–¢–û–õ–ë–´ (POSTS)**

### **–§—É–Ω–∫—Ü–∏—è getPostDimensions()** - —Å—Ç—Ä–æ–∫–∞ 3737

```javascript
getPostDimensions(postMaterial) {
    const match = postMaterial.match(/(\d+)x(\d+)/);
    if (match) {
        const width = parseInt(match[1]) / 1000;   // –ú–∏–ª–ª–∏–º–µ—Ç—Ä—ã ‚Üí –ú–µ—Ç—Ä—ã
        const height = parseInt(match[2]) / 1000;  // –ú–∏–ª–ª–∏–º–µ—Ç—Ä—ã ‚Üí –ú–µ—Ç—Ä—ã
        return { width, height };
    }
    return { width: 0.15, height: 0.15 };  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 150x150 –º–º
}
```

### **–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è —Å—Ç–æ–ª–±–æ–≤:**
- **–í–≤–æ–¥:** –ú–∏–ª–ª–∏–º–µ—Ç—Ä—ã (—Å—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ "150x150")
- **–†–∞—Å—á—ë—Ç:** –î–µ–ª–µ–Ω–∏–µ –Ω–∞ 1000 (150 / 1000 = 0.15)
- **–í –∫–æ–¥–µ:** –ú–µ—Ç—Ä—ã (0.15 –º)
- **–í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏:** 150 –º–º

### **–°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ —Å—Ç–æ–ª–±–æ–≤** - —Å—Ç—Ä–æ–∫–∞ 1166

```javascript
const postGeometry = new THREE.BoxGeometry(
    postDimensions.width,   // –®–∏—Ä–∏–Ω–∞ –≤ –º–µ—Ç—Ä–∞—Ö
    height,                 // –í—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±–∞ –≤ –º–µ—Ç—Ä–∞—Ö
    postDimensions.height   // –ì–ª—É–±–∏–Ω–∞ –≤ –º–µ—Ç—Ä–∞—Ö
);
```

### **–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–∑–º–µ—Ä–æ–≤ —Å—Ç–æ–ª–±–æ–≤:**

| –ú–∞—Ç–µ—Ä–∏–∞–ª | –í–≤–æ–¥ (–º–º) | –í –∫–æ–¥–µ (–º) | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è | –ú–∞—Å—à—Ç–∞–± |
|----------|-----------|------------|--------------|---------|
| "150x150" | 150√ó150 –º–º | 0.15√ó0.15 –º | 0.15√ó0.15 –º | **1:1** |
| "200x200" | 200√ó200 –º–º | 0.2√ó0.2 –º | 0.2√ó0.2 –º | **1:1** |
| "100x100" | 100√ó100 –º–º | 0.1√ó0.1 –º | 0.1√ó0.1 –º | **1:1** |
| –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | - | 0.15√ó0.15 –º | 0.15√ó0.15 –º | **1:1** |

**–í—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±–∞:** –ë–µ—Ä—ë—Ç—Å—è –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `height` (–≤ –º–µ—Ç—Ä–∞—Ö), –æ–±—ã—á–Ω–æ **2-3 –º–µ—Ç—Ä–∞**.

---

## üìä **–†–ê–°–ö–û–°–´ (BRACES)**

### **–§—É–Ω–∫—Ü–∏—è createBeamBraces()** - —Å—Ç—Ä–æ–∫–∏ 2076-2080

```javascript
const beamDimensions = this.getBeamDimensions(postMaterial, postType);

// –°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ —Ä–∞—Å–∫–æ—Å–∞
const braceGeometry = new THREE.BoxGeometry(
    beamDimensions.width,          // –®–∏—Ä–∏–Ω–∞ –≤ –º–µ—Ç—Ä–∞—Ö
    beamDimensions.height * 2,     // –î–ª–∏–Ω–∞ —Ä–∞—Å–∫–æ—Å–∞ (—É–¥–≤–æ–µ–Ω–Ω–æ–µ —Å–µ—á–µ–Ω–∏–µ)
    beamDimensions.height          // –ì–ª—É–±–∏–Ω–∞ –≤ –º–µ—Ç—Ä–∞—Ö
);

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞
leftBrace.scale.set(0.01, 0.01, 0.01);  // –£–º–µ–Ω—å—à–µ–Ω–∏–µ –≤ 100 —Ä–∞–∑
```

### **–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–∞—Å–∫–æ—Å–æ–≤:**

1. **–ò—Å—Ö–æ–¥–Ω–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è:**
   - **–í–≤–æ–¥:** –ë–µ—Ä—ë—Ç—Å—è –∏–∑ —Ä–∞–∑–º–µ—Ä–æ–≤ –±–∞–ª–∫–∏ (–≤ –º–µ—Ç—Ä–∞—Ö)
   - **–í –∫–æ–¥–µ:** –ú–µ—Ç—Ä—ã
   
2. **–ü–æ—Å–ª–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:**
   - **–ú–∞—Å—à—Ç–∞–±:** 0.01 (–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 100)
   - **–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä:** –ú–µ—Ç—Ä—ã √ó 0.01

### **–†–∞—Å—á—ë—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ —Ä–∞—Å–∫–æ—Å–æ–≤:**

#### **–î–ª—è —Å—Ç–æ–ª–±–æ–≤ 150√ó150 –º–º:**

**–ò—Å—Ö–æ–¥–Ω–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è:**
- –®–∏—Ä–∏–Ω–∞: 0.15 –º (150 –º–º)
- –î–ª–∏–Ω–∞: 0.15 √ó 2 = **0.3 –º (300 –º–º)**
- –ì–ª—É–±–∏–Ω–∞: 0.15 –º (150 –º–º)

**–ü–æ—Å–ª–µ –º–∞—Å—à—Ç–∞–±–∞ 0.01:**
- –®–∏—Ä–∏–Ω–∞: 0.15 √ó 0.01 = **0.0015 –º (1.5 –º–º)**
- –î–ª–∏–Ω–∞: 0.3 √ó 0.01 = **0.003 –º (3 –º–º)**
- –ì–ª—É–±–∏–Ω–∞: 0.15 √ó 0.01 = **0.0015 –º (1.5 –º–º)**

#### **–î–ª—è —Å—Ç–æ–ª–±–æ–≤ 200√ó200 –º–º (var-1, var-5):**

**–ò—Å—Ö–æ–¥–Ω–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è:**
- –®–∏—Ä–∏–Ω–∞: 0.2 –º (200 –º–º)
- –î–ª–∏–Ω–∞: 0.2 √ó 2 = **0.4 –º (400 –º–º)**
- –ì–ª—É–±–∏–Ω–∞: 0.2 –º (200 –º–º)

**–ü–æ—Å–ª–µ –º–∞—Å—à—Ç–∞–±–∞ 0.01:**
- –®–∏—Ä–∏–Ω–∞: 0.2 √ó 0.01 = **0.002 –º (2 –º–º)**
- –î–ª–∏–Ω–∞: 0.4 √ó 0.01 = **0.004 –º (4 –º–º)**
- –ì–ª—É–±–∏–Ω–∞: 0.2 √ó 0.01 = **0.002 –º (2 –º–º)**

---

## üìã **–°–†–ê–í–ù–ò–¢–ï–õ–¨–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê**

### **–°—Ç–æ–ª–±—ã 150√ó150:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–æ–ª–± | –†–∞—Å–∫–æ—Å (–∏—Å—Ö–æ–¥–Ω—ã–π) | –†–∞—Å–∫–æ—Å (–ø–æ—Å–ª–µ –º–∞—Å—à—Ç–∞–±–∞) |
|----------|-------|-------------------|------------------------|
| **–®–∏—Ä–∏–Ω–∞** | 0.15 –º (150 –º–º) | 0.15 –º (150 –º–º) | **0.0015 –º (1.5 –º–º)** |
| **–î–ª–∏–Ω–∞/–í—ã—Å–æ—Ç–∞** | 2-3 –º | 0.3 –º (300 –º–º) | **0.003 –º (3 –º–º)** |
| **–ì–ª—É–±–∏–Ω–∞** | 0.15 –º (150 –º–º) | 0.15 –º (150 –º–º) | **0.0015 –º (1.5 –º–º)** |
| **–ú–∞—Å—à—Ç–∞–±** | 1:1 | - | **1:100** |
| **–ï–¥–∏–Ω–∏—Ü—ã** | –ú–µ—Ç—Ä—ã | –ú–µ—Ç—Ä—ã | –ú–µ—Ç—Ä—ã |

### **–°—Ç–æ–ª–±—ã 200√ó200:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–æ–ª–± | –†–∞—Å–∫–æ—Å (–∏—Å—Ö–æ–¥–Ω—ã–π) | –†–∞—Å–∫–æ—Å (–ø–æ—Å–ª–µ –º–∞—Å—à—Ç–∞–±–∞) |
|----------|-------|-------------------|------------------------|
| **–®–∏—Ä–∏–Ω–∞** | 0.2 –º (200 –º–º) | 0.2 –º (200 –º–º) | **0.002 –º (2 –º–º)** |
| **–î–ª–∏–Ω–∞/–í—ã—Å–æ—Ç–∞** | 2-3 –º | 0.4 –º (400 –º–º) | **0.004 –º (4 –º–º)** |
| **–ì–ª—É–±–∏–Ω–∞** | 0.2 –º (200 –º–º) | 0.2 –º (200 –º–º) | **0.002 –º (2 –º–º)** |
| **–ú–∞—Å—à—Ç–∞–±** | 1:1 | - | **1:100** |
| **–ï–¥–∏–Ω–∏—Ü—ã** | –ú–µ—Ç—Ä—ã | –ú–µ—Ç—Ä—ã | –ú–µ—Ç—Ä—ã |

---

## üî¢ **–§–û–†–ú–£–õ–´ –†–ê–°–ß–Å–¢–ê**

### **–°—Ç–æ–ª–±—ã:**
```
postDimensions.width = parseInt(–º–∞—Ç–µ—Ä–∏–∞–ª.split('x')[0]) / 1000
postDimensions.height = parseInt(–º–∞—Ç–µ—Ä–∏–∞–ª.split('x')[1]) / 1000

–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä = postDimensions (–±–µ–∑ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)
```

### **–†–∞—Å–∫–æ—Å—ã:**
```
beamDimensions = getBeamDimensions(postMaterial, postType)

braceGeometry:
  –®–∏—Ä–∏–Ω–∞ = beamDimensions.width
  –î–ª–∏–Ω–∞ = beamDimensions.height √ó 2
  –ì–ª—É–±–∏–Ω–∞ = beamDimensions.height

–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä:
  –®–∏—Ä–∏–Ω–∞ = braceGeometry.width √ó 0.01
  –î–ª–∏–Ω–∞ = braceGeometry.height √ó 0.01
  –ì–ª—É–±–∏–Ω–∞ = braceGeometry.depth √ó 0.01
```

---

## üìä **–ü–†–ò–ú–ï–† –†–ê–°–ß–Å–¢–ê**

### **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ú–∞—Ç–µ—Ä–∏–∞–ª —Å—Ç–æ–ª–±–æ–≤: **"150x150"**
- –¢–∏–ø —Å—Ç–æ–ª–±–∞: **var-2, var-3, var-4**

### **–®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –±–∞–ª–∫–∏**
```javascript
getPostDimensions("150x150")
‚Üí { width: 0.15, height: 0.15 }  // –ú–µ—Ç—Ä—ã
```

### **–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ —Ä–∞—Å–∫–æ—Å–∞**
```javascript
braceGeometry = new THREE.BoxGeometry(
    0.15,      // –®–∏—Ä–∏–Ω–∞
    0.15 √ó 2,  // –î–ª–∏–Ω–∞ = 0.3
    0.15       // –ì–ª—É–±–∏–Ω–∞
)
```

### **–®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞**
```javascript
leftBrace.scale.set(0.01, 0.01, 0.01)

–§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã:
  –®–∏—Ä–∏–Ω–∞: 0.15 √ó 0.01 = 0.0015 –º = 1.5 –º–º
  –î–ª–∏–Ω–∞:  0.3 √ó 0.01 = 0.003 –º = 3 –º–º
  –ì–ª—É–±–∏–Ω–∞: 0.15 √ó 0.01 = 0.0015 –º = 1.5 –º–º
```

---

## ‚öñÔ∏è **–°–û–û–¢–ù–û–®–ï–ù–ò–ï –†–ê–ó–ú–ï–†–û–í**

### **–°—Ç–æ–ª–±—ã vs –†–∞—Å–∫–æ—Å—ã (150√ó150):**

```
–°—Ç–æ–ª–±:   150 –º–º √ó 2500 –º–º √ó 150 –º–º   (–®√ó–í√ó–ì)
–†–∞—Å–∫–æ—Å:  1.5 –º–º √ó 3 –º–º √ó 1.5 –º–º      (–®√ó–î√ó–ì)

–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ: 1:100 (—Ä–∞—Å–∫–æ—Å—ã –≤ 100 —Ä–∞–∑ –º–µ–Ω—å—à–µ –ø–æ –∫–∞–∂–¥–æ–º—É –∏–∑–º–µ—Ä–µ–Ω–∏—é)
```

### **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

```
–°—Ç–æ–ª–±:     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà (150 –º–º)
–†–∞—Å–∫–æ—Å:    ‚ñà (1.5 –º–º)

–î–ª–∏–Ω–∞ —Å—Ç–æ–ª–±–∞: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà (2500 –º–º)
–î–ª–∏–Ω–∞ —Ä–∞—Å–∫–æ—Å–∞: ‚ñà (3 –º–º)
```

---

## üí° **–í–ê–ñ–ù–´–ï –ú–û–ú–ï–ù–¢–´**

1. **–°—Ç–æ–ª–±—ã:**
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç **–º–µ—Ç—Ä—ã** –∫–∞–∫ –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è
   - ‚úÖ –†–∞–∑–º–µ—Ä—ã –≤ **1:1** —Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é
   - ‚úÖ –í–≤–æ–¥ –≤ **–º–∏–ª–ª–∏–º–µ—Ç—Ä–∞—Ö**, –∞–≤—Ç–æ–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –º–µ—Ç—Ä—ã

2. **–†–∞—Å–∫–æ—Å—ã:**
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç **–º–µ—Ç—Ä—ã** –∫–∞–∫ –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è
   - ‚úÖ –ì–µ–æ–º–µ—Ç—Ä–∏—è —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏–∑ —Ä–∞–∑–º–µ—Ä–æ–≤ –±–∞–ª–∫–∏
   - ‚ö†Ô∏è **–ú–∞—Å—à—Ç–∞–± 0.01** –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
   - ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤ **100 —Ä–∞–∑ –º–µ–Ω—å—à–µ** –≥–µ–æ–º–µ—Ç—Ä–∏–∏

3. **Three.js:**
   - ‚úÖ –ë–∞–∑–æ–≤–∞—è –µ–¥–∏–Ω–∏—Ü–∞: **–º–µ—Ç—Ä—ã**
   - ‚úÖ –í—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ —Ä–∞–∑–º–µ—Ä—ã –≤ –º–µ—Ç—Ä–∞—Ö
   - ‚úÖ –ú–∞—Å—à—Ç–∞–± –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `object.scale.set()`

---

## üìù **–ò–¢–û–ì–ò**

| –≠–ª–µ–º–µ–Ω—Ç | –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è | –í–≤–æ–¥ | –í –∫–æ–¥–µ | –ú–∞—Å—à—Ç–∞–± | –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä |
|---------|------------------|------|--------|---------|------------------|
| **–°—Ç–æ–ª–±—ã** | –ú–µ—Ç—Ä—ã | –º–º | –º | 1:1 | **150-200 –º–º** |
| **–†–∞—Å–∫–æ—Å—ã** | –ú–µ—Ç—Ä—ã | - | –º | 1:100 | **1.5-4 –º–º** |

---

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025  
**–§–∞–π–ª:** `Canopy3DRenderer.js`  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à—ë–Ω

