# ๐ง ะฃะะะะะซ ะฃะกะะะซะ ะะะะะะะะ ะะ ะะะะฌะะะะะ ะฃะะะ

**ะะฐัะฐ:** 27 ะพะบััะฑัั 2025  
**ะะตััะธั:** 2.2.3  
**ะกัะฐััั:** โ ะะตะฐะปะธะทะพะฒะฐะฝะพ

---

## ๐ฏ ะะะะะะะะะ

ะ ะบะพะฝัะบะพะฒะพะผ ัะทะปะต ัะตะฟะตัั **ะะะข ััะพะฒัั ะฟะพะดัะตะทะพะบ**. ะะตััะฝะธะต ะณัะฐะฝะธ ัััะพะฟะธะปัะฝัั ะฝะพะณ ัััะบััััั ะฝะฐะฟััะผัั, ะฑะตะท ัะบะพัะพะฒ.

---

## ๐ ะะะ ะญะขะ ะะซะะะฏะะะข

### ะก ััะพะฒัะผะธ ะฟะพะดัะตะทะบะฐะผะธ (v2.2.2):

```
           ะะพะฝะตะบ
             โ
      โโโโโโโโชโโโโโโโ  โ ััะพะฒัะต ะฟะพะดัะตะทะบะธ
     โฑ   โฑ   โ   โฒ   โฒ
    โฑ   โฑ    โ    โฒ   โฒ
   โฑ   โฑ     โ     โฒ   โฒ  โ ัะบะพัะตะฝะฝัะต ัะพััั
```

### ะะะ ััะพะฒัั ะฟะพะดัะตะทะพะบ (v2.2.3):

```
           ะะพะฝะตะบ
             โ
      โโโโโโโโดโโโโโโโ  โ ะฟััะผัะต ัะพััั
     โฑ       โ       โฒ
    โฑ        โ        โฒ
   โฑ         โ         โฒ  โ ะฟะพะปะฝะฐั ะดะปะธะฝะฐ ัะตะณะผะตะฝัะพะฒ
```

---

## ๐ง ะะะ ะะะะะขะะะข

### ะ ะบะพะดะต:

```javascript
for (let k = 0; k < segs.length - 1; k++) {
    // ะะปั ะบะพะฝัะบะพะฒะพะณะพ ัะทะปะฐ ะะ ะฟัะธะผะตะฝัะตะผ ััะพะฒัะต ะฟะพะดัะตะทะบะธ
    if (type === 'top' && k === Math.floor(segs.length / 2) - 1) {
        // ะัะพะฟััะบะฐะตะผ ะบะพะฝัะบะพะฒัะน ัะทะตะป - ัะฐะผ ะฒะตััะฝะธะต ะณัะฐะฝะธ ัััะบััััั ะฑะตะท ััะพะฒ
        continue;
    }
    
    // ... ัะฐััะตั ััะพะฒัั ะฟะพะดัะตะทะพะบ ะดะปั ะพััะฐะปัะฝัั ัะทะปะพะฒ
}
```

### ะงัะพ ะฟัะพะธััะพะดะธั:

1. **ะะฟัะตะดะตะปัะตััั ะบะพะฝัะบะพะฒัะน ัะทะตะป:**
   ```
   k === Math.floor(segs.length / 2) - 1
   ```
   ะะปั N=8: k=3 (ัะทะตะป ะผะตะถะดั ัะตะณะผะตะฝัะฐะผะธ 3 ะธ 4)

2. **ะะปั ะบะพะฝัะบะพะฒะพะณะพ ัะทะปะฐ ะฟัะพะฟััะบะฐะตััั ัะฐััะตั ััะพะฒัั ะฟะพะดัะตะทะพะบ**
   - `sAtEnd[k].s1 = 0` (ะฟัะฐะฒัะน ะบะพะฝะตั ะปะตะฒะพะณะพ ัะตะณะผะตะฝัะฐ)
   - `sAtEnd[k+1].s0 = 0` (ะปะตะฒัะน ะบะพะฝะตั ะฟัะฐะฒะพะณะพ ัะตะณะผะตะฝัะฐ)

3. **ะกััะพะฟะธะปัะฝัะต ะฝะพะณะธ ะธะดัั ะฟะพะปะฝะพะน ะดะปะธะฝะพะน ะดะพ ะบะพะฝัะบะฐ**
   - ะะตะท ัะบะพัะฐัะธะฒะฐะฝะธั
   - ะััะผัะต ัะพััั
   - ะะตััะฝะธะต ะณัะฐะฝะธ ัััะบััััั ะฝะฐะฟััะผัั

---

## ๐ ะกะฅะะะ ะกะขะซะะะะะ

### ะะธะด ะฒ ัะฐะทัะตะทะต (ะบะพะฝัะบะพะฒัะน ัะทะตะป):

```
        ะะตััะฝะธะต ะณัะฐะฝะธ ัััะบััััั
              โ
      โโโโโโโโโดโโโโโโโโ
      โ   ะะตะฒัะน  ะัะฐะฒัะนโ
      โ   ัะตะณะผะตะฝัโัะตะณะผ.โ
      โ     โฑ    โ    โฒโ
      โ    โฑ     โ     โฒ
      โ   โฑ      โ      โฒ
      โ  โ       โ       โ  โ ะพัะธ (ัะผะตัะตะฝั ะฒะฝะธะท ะฝะฐ b/2)
      โ โฑ        โ        โฒ
      โโโโโโโโโโโโโโโโโโโโโโโ
```

**ะัะพะฑะตะฝะฝะพััะธ:**
- ะขะพััั ัััะพะฟะธะป: **ะฟััะผัะต** (ะฟะตัะฟะตะฝะดะธะบัะปััะฝั ะพัะธ)
- ะะตััะฝะธะต ะณัะฐะฝะธ: **ัััะบััััั ะฒ ะปะธะฝะธั**
- ะฃัะพะฒัะต ะฟะพะดัะตะทะบะธ: **ะฝะตั**

---

## โ ะะะะะะฃะฉะะกะขะะ

### 1. ะฃะฟัะพัะตะฝะฝะฐั ะบะพะฝััััะบัะธั
- โ ะะตะฝััะต ัะปะพะถะฝัั ะทะฐะฟะธะปะพะฒ
- โ ะัะพัะต ะฒ ะธะทะณะพัะพะฒะปะตะฝะธะธ
- โ ะััััะตะต ะผะพะฝัะฐะถ

### 2. ะงะตัะบะฐั ะปะธะฝะธั ะบะพะฝัะบะฐ
- โ ะะตััะฝะธะต ะณัะฐะฝะธ ะพะฑัะฐะทััั ะฟััะผัั ะปะธะฝะธั
- โ ะะธะทัะฐะปัะฝะพ ัะธััะฐั ะณะตะพะผะตััะธั
- โ ะะตะณัะต ัะบะปะฐะดัะฒะฐัั ะบัะพะฒะปั

### 3. ะัะพัะฝะพััั
- โ ะะพะปะฝะฐั ะดะปะธะฝะฐ ัััะพะฟะธะปัะฝัั ะฝะพะณ
- โ ะะตั ะพัะปะฐะฑะปะตะฝะธั ัะตัะตะฝะธั
- โ ะะฐะดะตะถะฝะฐั ะบะพะฝััััะบัะธั

### 4. ะฃัะพะฒัะต ะฟะพะดัะตะทะบะธ ะพััะฐะปะธัั ะฝะฐ ะดััะณะธั ัะทะปะฐั
- โ ะัะพะผะตะถััะพัะฝัะต ัะทะปั: ั ััะฐะผะธ (ะฟะปะพัะฝะฐั ัััะบะพะฒะบะฐ)
- โ ะะธะถะฝะธะน ะฟะพัั: ั ััะฐะผะธ
- โ ะะพะฝัะบะพะฒัะน ัะทะตะป: ะฑะตะท ััะพะฒ (ะฟัะพััะพะน ัััะบ)

---

## ๐ ะะะะะะะซ

### ะะปั ะบะพะฝัะบะฐ ะฟัะธ N=8 (ัะตะณะผะตะฝัั 3 ะธ 4):

**ะะตะฒัะน ัะตะณะผะตะฝั (seg[3]):**
- ะะฐัะฐะปะพ: `top[3]`
- ะะพะฝะตั: `top[4]` (ะบะพะฝะตะบ)
- ะะพะดัะตะทะบะฐ ัะปะตะฒะฐ: `s0 โ 0` (ะผะพะถะตั ะฑััั ะพั ะฟัะตะดัะดััะตะณะพ ัะทะปะฐ)
- ะะพะดัะตะทะบะฐ ัะฟัะฐะฒะฐ: `s1 = 0` โ (ะะะข ััะพะฒะพะน ะฟะพะดัะตะทะบะธ ะฒ ะบะพะฝัะบะต)

**ะัะฐะฒัะน ัะตะณะผะตะฝั (seg[4]):**
- ะะฐัะฐะปะพ: `top[4]` (ะบะพะฝะตะบ)
- ะะพะฝะตั: `top[5]`
- ะะพะดัะตะทะบะฐ ัะปะตะฒะฐ: `s0 = 0` โ (ะะะข ััะพะฒะพะน ะฟะพะดัะตะทะบะธ ะฒ ะบะพะฝัะบะต)
- ะะพะดัะตะทะบะฐ ัะฟัะฐะฒะฐ: `s1 โ 0` (ะผะพะถะตั ะฑััั ะดะปั ัะปะตะดัััะตะณะพ ัะทะปะฐ)

---

## ๐จ ะะะะฃะะะะะะฆะะฏ ะะกะะ ะคะะะะซ

```
                    ะะะะะ (ะฑะตะท ััะพะฒ)
                       โด
                   โโโ/โ\โโโ
                  โฑ  / โ \  โฒ
      ะก ััะฐะผะธ โ โโฑ  /  โ  \  โฒโ โ ะก ััะฐะผะธ
               โ โฑ /   โ   \ โฒ โ
               โโฑ /    โ    \ โฒโ
              โ  /     โ     \  โ
             /  /      โ      \  \
            /  /       โ       \  \
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        ะะธะถะฝะธะน ะฟะพัั (ั ััะฐะผะธ ะฒะพ ะฒัะตั ัะทะปะฐั)
```

**ะะตะณะตะฝะดะฐ:**
- `โด` - ะบะพะฝะตะบ ะฑะตะท ััะพะฒัั ะฟะพะดัะตะทะพะบ (ะฟััะผัะต ัะพััั)
- `โโฑ`, `โฒโ` - ะฟัะพะผะตะถััะพัะฝัะต ัะทะปั ั ััะพะฒัะผะธ ะฟะพะดัะตะทะบะฐะผะธ
- `โ` - ัะทะปั ะฝะธะถะฝะตะณะพ ะฟะพััะฐ ั ััะพะฒัะผะธ ะฟะพะดัะตะทะบะฐะผะธ

---

## ๐ ะขะะฅะะะงะะกะะะ ะะะขะะะ

### ะะฟัะตะดะตะปะตะฝะธะต ะบะพะฝัะบะพะฒะพะณะพ ัะทะปะฐ:

```javascript
const ridgeNodeIndex = Math.floor(segs.length / 2) - 1;
```

**ะะปั ัะฐะทะฝัั N:**
- N=4: ridgeNodeIndex = 1 (ัะทะตะป ะผะตะถะดั seg[1] ะธ seg[2])
- N=6: ridgeNodeIndex = 2 (ัะทะตะป ะผะตะถะดั seg[2] ะธ seg[3])
- N=8: ridgeNodeIndex = 3 (ัะทะตะป ะผะตะถะดั seg[3] ะธ seg[4])
- N=10: ridgeNodeIndex = 4 (ัะทะตะป ะผะตะถะดั seg[4] ะธ seg[5])

### ะฃัะปะพะฒะธะต ะฟัะพะฟััะบะฐ:

```javascript
if (type === 'top' && k === Math.floor(segs.length / 2) - 1) {
    continue; // ะัะพะฟััะบะฐะตะผ ัะฐััะตั ััะพะฒัั ะฟะพะดัะตะทะพะบ
}
```

**ะัะธะผะตะฝัะตััั ัะพะปัะบะพ ะบ:**
- โ ะะตััะฝะตะผั ะฟะพััั (`type === 'top'`)
- โ ะะพะฝัะบะพะฒะพะผั ัะทะปั (`k === ridgeNodeIndex`)

**ะะ ะฟัะธะผะตะฝัะตััั ะบ:**
- โ ะะธะถะฝะตะผั ะฟะพััั (ัะฐะผ ััะพะฒัะต ะฟะพะดัะตะทะบะธ ะพััะฐัััั)
- โ ะััะณะธะผ ัะทะปะฐะผ ะฒะตััะฝะตะณะพ ะฟะพััะฐ (ัะฐะผ ััะพะฒัะต ะฟะพะดัะตะทะบะธ ะพััะฐัััั)
- โ ะะฐัะบะพัะฐะผ (ั ะฝะธั ะธ ัะฐะบ ะฝะตั ััะพะฒัั ะฟะพะดัะตะทะพะบ)

---

## ๐ ะกะะะะะะะะ ะะะะกะะ

| ะะฐัะฐะผะตัั | v2.2.2 | v2.2.3 |
|----------|--------|--------|
| ะฃัะพะฒัะต ะฟะพะดัะตะทะบะธ ะฒ ะบะพะฝัะบะต | โ ะััั | โ ะะตั |
| ะขะพััั ัััะพะฟะธะป ะฒ ะบะพะฝัะบะต | ะกะบะพัะตะฝะฝัะต | โ ะััะผัะต |
| ะะปะธะฝะฐ ัะตะณะผะตะฝัะพะฒ ั ะบะพะฝัะบะฐ | ะฃะบะพัะพัะตะฝั | โ ะะพะปะฝัะต |
| ะฃัะพะฒัะต ะฟะพะดัะตะทะบะธ ะฒ ะดััะณะธั ัะทะปะฐั | โ ะััั | โ ะััั |
| ะัะพััะพัะฐ ะธะทะณะพัะพะฒะปะตะฝะธั | ะกัะตะดะฝัั | โ ะััะพะบะฐั |

---

## ๐ง ะะะะะะะะะซะ ะะะ

### ะคะฐะนะป: `naves-calc/assets/js/naves-calc.bundle.js`

**ะกััะพะบะธ 2105-2109:**

```javascript
// ะะปั ะบะพะฝัะบะพะฒะพะณะพ ัะทะปะฐ (ัะตะฝััะฐะปัะฝัะน ัะทะตะป ะฒะตััะฝะตะณะพ ะฟะพััะฐ) ะะ ะฟัะธะผะตะฝัะตะผ ััะพะฒัะต ะฟะพะดัะตะทะบะธ
if (type === 'top' && k === Math.floor(segs.length / 2) - 1) {
    // ะัะพะฟััะบะฐะตะผ ะบะพะฝัะบะพะฒัะน ัะทะตะป - ัะฐะผ ะฒะตััะฝะธะต ะณัะฐะฝะธ ัััะบััััั ะฑะตะท ััะพะฒ
    continue;
}
```

ะญัะพ ััะปะพะฒะธะต ะดะพะฑะฐะฒะปะตะฝะพ **ะฒ ะฝะฐัะฐะปะพ ัะธะบะปะฐ** (ัััะพะบะฐ 2104), ะดะพ ัะฐััะตัะฐ ััะพะฒัั ะฟะพะดัะตะทะพะบ.

---

## ๐งช ะะะะะะะะ

### ะะพัะปะต ะพะฑะฝะพะฒะปะตะฝะธั ัััะฐะฝะธัั ะฟัะพะฒะตัััะต:

1. โ **ะะพะฝัะบะพะฒัะน ัะทะตะป:**
   - ะกััะพะฟะธะปัะฝัะต ะฝะพะณะธ ะธะดัั ะดะพ ะบะพะฝัะบะฐ ะฟะพะปะฝะพะน ะดะปะธะฝะพะน
   - ะขะพััั ะฟััะผัะต (ะฝะต ัะบะพัะตะฝะฝัะต)
   - ะะตััะฝะธะต ะณัะฐะฝะธ ะพะฑัะฐะทััั ะฟััะผัั ะปะธะฝะธั

2. โ **ะัะพะผะตะถััะพัะฝัะต ัะทะปั:**
   - ะฃัะพะฒัะต ะฟะพะดัะตะทะบะธ ัะฐะฑะพัะฐัั
   - ะะปะพัะฝะฐั ัััะบะพะฒะบะฐ ัะตะณะผะตะฝัะพะฒ
   - ะะตั ัะตะปะตะน

3. โ **ะะธะถะฝะธะน ะฟะพัั:**
   - ะฃัะพะฒัะต ะฟะพะดัะตะทะบะธ ะฒะพ ะฒัะตั ัะทะปะฐั
   - ะะตะท ะธะทะผะตะฝะตะฝะธะน

4. โ **ะะฑัะฐั ะณะตะพะผะตััะธั:**
   - ะขัะตัะณะพะปัะฝะฐั ัะพัะผะฐ ัะพััะฐะฝะตะฝะฐ
   - ะกะธะผะผะตััะธั ะพัะฝะพัะธัะตะปัะฝะพ ัะตะฝััะฐ
   - ะะฐัะบะพัั ะฝะฐ ะผะตััะต

---

## ๐ก ะะะะะ ะะกะะะะฌะะะะะขะฌ

### ะะะ ััะพะฒัั ะฟะพะดัะตะทะพะบ ะฒ ะบะพะฝัะบะต (v2.2.3):
- โ ะัะพััะฐั ะบะพะฝััััะบัะธั
- โ ะัััััะน ะผะพะฝัะฐะถ
- โ ะกัะฐะฝะดะฐััะฝัะน ะฟะพะดัะพะด
- โ **ะะตะบะพะผะตะฝะดัะตััั ะดะปั ะฑะพะปััะธะฝััะฒะฐ ัะปััะฐะตะฒ**

### ะก ััะพะฒัะผะธ ะฟะพะดัะตะทะบะฐะผะธ ะฒ ะบะพะฝัะบะต (v2.2.2):
- ะะปั ะฒััะพะบะธั ััะตะฑะพะฒะฐะฝะธะน ะบ ัะพัะฝะพััะธ
- ะะปั ะผะธะฝะธะผะธะทะฐัะธะธ ะทะฐะทะพัะพะฒ
- ะะปั ัะปะพะถะฝัั ะบะพะฝััััะบัะธะน
- ะขัะตะฑัะตั ะฑะพะปััะต ะฒัะตะผะตะฝะธ ะฝะฐ ะธะทะณะพัะพะฒะปะตะฝะธะต

---

## ๐ฏ ะะะะฃะะฌะขะะข

ะขะตะฟะตัั ัะตัะผะฐ ะธะผะตะตั:
- โ ะะพะฝัะบะพะฒัะน ัะทะตะป **ะะะ ััะพะฒัั ะฟะพะดัะตะทะพะบ** (ะฟััะผัะต ัะพััั)
- โ ะัะพะผะตะถััะพัะฝัะต ัะทะปั **ะก ััะพะฒัะผะธ ะฟะพะดัะตะทะบะฐะผะธ** (ะฟะปะพัะฝะฐั ัััะบะพะฒะบะฐ)
- โ ะฃะฟัะพัะตะฝะฝะฐั ะบะพะฝััััะบัะธั
- โ ะัะพัะตััะธะพะฝะฐะปัะฝัะน ะฒะฝะตัะฝะธะน ะฒะธะด

**ะะฟัะธะผะฐะปัะฝัะน ะฑะฐะปะฐะฝั ะผะตะถะดั ัะพัะฝะพัััั ะธ ะฟัะพััะพัะพะน ะธะทะณะพัะพะฒะปะตะฝะธั!** ๐๏ธโจ

---

**ะะพะฝะตั ะดะพะบัะผะตะฝัะฐ**

ะะตะฐะปะธะทะพะฒะฐะฝะพ: 27 ะพะบััะฑัั 2025  
ะะตััะธั: 2.2.3  
ะกัะฐััั: โ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั


