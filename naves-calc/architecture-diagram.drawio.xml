<mxfile host="app.diagrams.net" modified="2025-01-20T00:00:00.000Z" agent="5.0" version="21.0.0" etag="drawio-diagram" type="device">
  <diagram id="architecture-diagram" name="Архитектура калькулятора навесов">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="2339" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Заголовок -->
        <mxCell id="title" value="Калькулятор навесов - Архитектура MVP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="654" height="40" as="geometry" />
        </mxCell>
        
        <!-- Слой пользователя -->
        <mxCell id="user-layer" value="Слой пользователя" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="1574" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="index-html" value="index.html&#xa;Главная страница&#xa;&#xa;• Форма параметров (слева)&#xa;• 3D окно (справа)&#xa;• Блок уточнения дизайна&#xa;• Блок цены и действий" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="user-layer">
          <mxGeometry x="20" y="40" width="300" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="css" value="naves-calc.css&#xa;Стили и макет&#xa;&#xa;• Адаптивный дизайн&#xa;• Медиа-запросы&#xa;• Анимации" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="user-layer">
          <mxGeometry x="340" y="40" width="250" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="ui-components" value="UI Компоненты&#xa;&#xa;• Форма параметров (#nc-form)&#xa;• 3D визуализация (#nc-canvas)&#xa;• Сводка (#nc-summary)&#xa;• Кнопки действий&#xa;• Управление камерой" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="user-layer">
          <mxGeometry x="610" y="40" width="300" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="three-libs" value="Three.js Библиотеки&#xa;&#xa;• three.min.js&#xa;• OrbitControls.js&#xa;• GLTFLoader.js" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="user-layer">
          <mxGeometry x="930" y="40" width="200" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="utils" value="Утилиты&#xa;&#xa;• storage-manager.js&#xa;• order-manager.js&#xa;• pdf-export.js" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="user-layer">
          <mxGeometry x="1150" y="40" width="200" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="geometry" value="Геометрия&#xa;&#xa;• partGeometry.js&#xa;• braceGeometry.js&#xa;• partGeometry_r1-r4.js" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="user-layer">
          <mxGeometry x="1370" y="40" width="200" height="140" as="geometry" />
        </mxCell>
        
        <!-- MVP Слой -->
        <mxCell id="mvp-layer" value="MVP Архитектура" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="40" y="300" width="1574" height="400" as="geometry" />
        </mxCell>
        
        <!-- Presenter -->
        <mxCell id="presenter" value="CanopyPresenter.js&#xa;Координатор (Presenter)&#xa;&#xa;✓ Координирует Model ↔ View&#xa;✓ Координирует View ↔ Renderer&#xa;✓ Обрабатывает события&#xa;✓ Управляет потоком данных" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;fontStyle=1" vertex="1" parent="mvp-layer">
          <mxGeometry x="20" y="40" width="300" height="160" as="geometry" />
        </mxCell>
        
        <!-- Model -->
        <mxCell id="model" value="CanopyModel.js&#xa;Модель данных (Model)&#xa;&#xa;✓ Хранение параметров&#xa;✓ Загрузка цен (prices.json)&#xa;✓ Расчет стоимости&#xa;✓ Валидация данных&#xa;✓ Экспорт/импорт" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;fontStyle=1" vertex="1" parent="mvp-layer">
          <mxGeometry x="340" y="40" width="300" height="160" as="geometry" />
        </mxCell>
        
        <!-- View -->
        <mxCell id="view" value="CanopyView.js&#xa;Представление (View)&#xa;&#xa;✓ Рендеринг формы&#xa;✓ Отображение результатов&#xa;✓ Обновление спецификации&#xa;✓ Обработка событий UI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;fontStyle=1" vertex="1" parent="mvp-layer">
          <mxGeometry x="660" y="40" width="300" height="160" as="geometry" />
        </mxCell>
        
        <!-- 3D Renderer -->
        <mxCell id="renderer" value="Canopy3DRenderer.js&#xa;3D Рендеринг (Renderer)&#xa;&#xa;✓ Инициализация Three.js&#xa;✓ Создание 3D модели&#xa;✓ Обновление сцены&#xa;✓ Управление камерой&#xa;✓ Обработка событий мыши" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;fontStyle=1" vertex="1" parent="mvp-layer">
          <mxGeometry x="980" y="40" width="300" height="160" as="geometry" />
        </mxCell>
        
        <!-- App -->
        <mxCell id="app" value="app.js&#xa;Точка входа&#xa;&#xa;✓ Инициализация компонентов&#xa;✓ Связывание MVP&#xa;✓ Запуск приложения" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;fontStyle=1" vertex="1" parent="mvp-layer">
          <mxGeometry x="1300" y="40" width="250" height="160" as="geometry" />
        </mxCell>
        
        <!-- Поток данных -->
        <mxCell id="data-flow" value="Поток данных" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="mvp-layer">
          <mxGeometry x="20" y="220" width="1530" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-1" value="1. Пользователь изменяет параметр" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;fontSize=11;" vertex="1" parent="mvp-layer">
          <mxGeometry x="20" y="260" width="200" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-2" value="2. View → Presenter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;fontSize=11;" vertex="1" parent="mvp-layer">
          <mxGeometry x="240" y="260" width="200" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-3" value="3. Presenter → Model" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;fontSize=11;" vertex="1" parent="mvp-layer">
          <mxGeometry x="460" y="260" width="200" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-4" value="4. Model пересчитывает" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;fontSize=11;" vertex="1" parent="mvp-layer">
          <mxGeometry x="680" y="260" width="200" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-5" value="5. Presenter → View" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;fontSize=11;" vertex="1" parent="mvp-layer">
          <mxGeometry x="900" y="260" width="200" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-6" value="6. Presenter → Renderer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;fontSize=11;" vertex="1" parent="mvp-layer">
          <mxGeometry x="1120" y="260" width="200" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-7" value="7. Обновление UI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;fontSize=11;" vertex="1" parent="mvp-layer">
          <mxGeometry x="1340" y="260" width="200" height="40" as="geometry" />
        </mxCell>
        
        <!-- Стрелки потока данных -->
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9673a6;" edge="1" parent="mvp-layer" source="flow-1" target="flow-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9673a6;" edge="1" parent="mvp-layer" source="flow-2" target="flow-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9673a6;" edge="1" parent="mvp-layer" source="flow-3" target="flow-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow4" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9673a6;" edge="1" parent="mvp-layer" source="flow-4" target="flow-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow5" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9673a6;" edge="1" parent="mvp-layer" source="flow-5" target="flow-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow6" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9673a6;" edge="1" parent="mvp-layer" source="flow-6" target="flow-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <!-- Стрелки между компонентами MVP -->
        <mxCell id="mvp-arrow1" value="onParamChanged()" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#82b366;fontSize=10;" edge="1" parent="mvp-layer" source="view" target="presenter">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="mvp-arrow2" value="updateParam()" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#82b366;fontSize=10;" edge="1" parent="mvp-layer" source="presenter" target="model">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="mvp-arrow3" value="updateResults()" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#82b366;fontSize=10;" edge="1" parent="mvp-layer" source="presenter" target="view">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="mvp-arrow4" value="update3D()" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#82b366;fontSize=10;" edge="1" parent="mvp-layer" source="presenter" target="renderer">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        
        <!-- Backend слой -->
        <mxCell id="backend-layer" value="Backend &amp; Данные" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="40" y="720" width="1574" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="api" value="API (orders.php)&#xa;Обработка заказов&#xa;&#xa;• Сохранение заказов&#xa;• Получение списка заказов&#xa;• Управление заказами" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="backend-layer">
          <mxGeometry x="20" y="40" width="300" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="prices-json" value="prices.json&#xa;База цен&#xa;&#xa;• Цены материалов&#xa;• Цены работ&#xa;• Цены доставки" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="backend-layer">
          <mxGeometry x="340" y="40" width="300" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="storage" value="LocalStorage&#xa;Хранилище браузера&#xa;&#xa;• Сохраненные расчеты&#xa;• История изменений&#xa;• Настройки пользователя" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="backend-layer">
          <mxGeometry x="660" y="40" width="300" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="pdf-export" value="PDF Export&#xa;Экспорт данных&#xa;&#xa;• Генерация PDF сметы&#xa;• Экспорт спецификации&#xa;• Печать расчетов" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="backend-layer">
          <mxGeometry x="980" y="40" width="300" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="server" value="Node.js Server&#xa;(опционально)&#xa;&#xa;• API сервер&#xa;• Обработка запросов&#xa;• Управление данными" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;" vertex="1" parent="backend-layer">
          <mxGeometry x="1300" y="40" width="250" height="120" as="geometry" />
        </mxCell>
        
        <!-- UI Структура -->
        <mxCell id="ui-structure" value="Структура UI" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="40" y="920" width="1574" height="300" as="geometry" />
        </mxCell>
        
        <mxCell id="ui-layout" value="Макет страницы (index.html)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;verticalAlign=top;spacingLeft=10;fontSize=12;fontStyle=1" vertex="1" parent="ui-structure">
          <mxGeometry x="20" y="40" width="1530" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="form-section" value="Форма параметров (#nc-form) - СЛЕВА&#xa;• Форма кровли (радио-кнопки)&#xa;• Размеры (слайдеры: длина, ширина, высота)&#xa;• Материалы (селекты: столбы, фермы, раскосы)&#xa;• Цвет кровли&#xa;• Выпуски балок&#xa;• Монтаж / Доставка" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontSize=11;" vertex="1" parent="ui-structure">
          <mxGeometry x="20" y="100" width="500" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="3d-section" value="3D Окно (.naves-calc__view) - СПРАВА&#xa;• Цена (totalPrice)&#xa;• Кнопки действий (заказ, сохранение)&#xa;• 3D Canvas (#nc-canvas)&#xa;• Управление камерой&#xa;• Кнопки: 360°, скачать, полноэкранный режим&#xa;• Сводка (#nc-summary)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontSize=11;" vertex="1" parent="ui-structure">
          <mxGeometry x="540" y="100" width="500" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="design-section" value="Блок уточнения дизайна&#xa;• Выбор типа столбов&#xa;• Выбор типа раскосов&#xa;• Дополнительные опции" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontSize=11;" vertex="1" parent="ui-structure">
          <mxGeometry x="1060" y="100" width="490" height="180" as="geometry" />
        </mxCell>
        
        <!-- Связи между слоями -->
        <mxCell id="link-ui-mvp" value="События UI" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#d79b00;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="ui-components" target="view">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="760" y="280" as="sourcePoint" />
            <mxPoint x="810" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="link-mvp-backend" value="Загрузка данных" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#b85450;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="model" target="prices-json">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="490" y="700" as="sourcePoint" />
            <mxPoint x="540" y="650" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="link-mvp-storage" value="Сохранение" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#b85450;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="presenter" target="storage">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="500" as="sourcePoint" />
            <mxPoint x="660" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Легенда -->
        <mxCell id="legend" value="Легенда" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="40" y="1240" width="1574" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-title" value="Обозначения" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="legend">
          <mxGeometry x="20" y="40" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-mvp" value="MVP Компоненты" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=middle;spacingLeft=10;fontSize=11;" vertex="1" parent="legend">
          <mxGeometry x="20" y="80" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-ui" value="UI Компоненты" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=middle;spacingLeft=10;fontSize=11;" vertex="1" parent="legend">
          <mxGeometry x="240" y="80" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-backend" value="Backend &amp; Данные" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;verticalAlign=middle;spacingLeft=10;fontSize=11;" vertex="1" parent="legend">
          <mxGeometry x="460" y="80" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-flow" value="Поток данных" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;verticalAlign=middle;spacingLeft=10;fontSize=11;" vertex="1" parent="legend">
          <mxGeometry x="680" y="80" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-arrow" value="→ Связи между компонентами" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="legend">
          <mxGeometry x="900" y="80" width="250" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-dashed" value="--- Связи между слоями" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="legend">
          <mxGeometry x="1170" y="80" width="250" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="notes" value="Примечания:&#xa;• Архитектура MVP обеспечивает разделение ответственности&#xa;• Все компоненты связаны через Presenter&#xa;• 3D рендеринг изолирован в отдельном компоненте&#xa;• Данные загружаются из prices.json через Model&#xa;• UI события обрабатываются через View → Presenter → Model" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;spacingLeft=10;fontSize=10;fontColor=#333333;" vertex="1" parent="legend">
          <mxGeometry x="20" y="130" width="1530" height="60" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
