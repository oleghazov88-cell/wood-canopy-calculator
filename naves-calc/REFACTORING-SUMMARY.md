# üìã –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤ MVP –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

**–î–∞—Ç–∞:** 30 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–æ–µ–∫—Ç:** –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–∞–≤–µ—Å–æ–≤  
**–ó–∞–¥–∞—á–∞:** –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –≤ MVP –ø–∞—Ç—Ç–µ—Ä–Ω

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ ‚úì
- –ò–∑—É—á–µ–Ω —Ñ–∞–π–ª `naves-calc.bundle.js` (3732 —Å—Ç—Ä–æ–∫–∏)
- –í—ã—è–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: God Object anti-pattern
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

### 2. –°–æ–∑–¥–∞–Ω–∏–µ Model (CanopyModel.js) ‚úì
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~350  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞–≤–µ—Å–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–µ–Ω
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤ (calculateCost, getSpecification)
- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (getBeamDimensions, getTrussDimensions, etc.)
- –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `loadPrices()` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–Ω –∏–∑ JSON
- `calculateCost()` - —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–∞–≤–µ—Å–∞
- `getSpecification()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `updateParam(key, value)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- `exportData()` / `importData()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞

### 3. –°–æ–∑–¥–∞–Ω–∏–µ View (CanopyView.js) ‚úì
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~450  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML —Ñ–æ—Ä–º—ã —Å –∫–æ–Ω—Ç—Ä–æ–ª–∞–º–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å—á–µ—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ UI —Å–æ–±—ã—Ç–∏–π
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `renderForm(params)` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
- `renderSummary(data)` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–æ–¥–∫–∏
- `updateSpecification(spec)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `bindFormEvents()` - –ø—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π
- `formatMoney(amount)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω

### 4. –°–æ–∑–¥–∞–Ω–∏–µ 3D Renderer (Canopy3DRenderer.js) ‚úì
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~400 (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Three.js —Å—Ü–µ–Ω—ã
- –°–æ–∑–¥–∞–Ω–∏–µ 3D –º–æ–¥–µ–ª–∏ –Ω–∞–≤–µ—Å–∞
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –∞–Ω–∏–º–∞—Ü–∏—è
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π –∏ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `loadThreeJS()` - –∑–∞–≥—Ä—É–∑–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `init()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 3D —Å—Ü–µ–Ω—ã
- `update(params)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
- `buildCanopy(params)` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –Ω–∞–≤–µ—Å–∞
- `animate()` - –∞–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ü–∏–∫–ª

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∞ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è. –î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Å–µ create* –º–µ—Ç–æ–¥—ã –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

### 5. –°–æ–∑–¥–∞–Ω–∏–µ Presenter (CanopyPresenter.js) ‚úì
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~300  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É Model, View –∏ Renderer
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –î–µ–±–∞—É–Ω—Å–∏–Ω–≥ 3D –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `init()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `calculateAndUpdate()` - —Ä–∞—Å—á–µ—Ç –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö view
- `update3DModelDebounced()` - –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 3D
- `onSaveClicked()` / `onOrderClicked()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π
- `loadCalculation()` / `saveCalculation()` - —Ä–∞–±–æ—Ç–∞ —Å localStorage

### 6. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ (app.js) ‚úì
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~60  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ MVP
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ API
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—É–±–ª–∏—á–Ω—ã–π API:**
```javascript
window.CanopyApp = {
    presenter, model, view, renderer,
    getCurrentData(), reset(), save(), load(),
    getSaved(), exportPDF()
}
```

### 7. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ index.html ‚úì
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ó–∞–º–µ–Ω–µ–Ω `<script src="naves-calc.bundle.js">` –Ω–∞ 5 MVP –º–æ–¥—É–ª–µ–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

**–î–æ:**
```html
<script src="/naves-calc/assets/js/naves-calc.bundle.js"></script>
<script>
    window.NavesCalc.init('#nc-form', '#nc-canvas', '#nc-summary');
</script>
```

**–ü–æ—Å–ª–µ:**
```html
<script src="/naves-calc/assets/js/mvp/CanopyModel.js"></script>
<script src="/naves-calc/assets/js/mvp/CanopyView.js"></script>
<script src="/naves-calc/assets/js/mvp/Canopy3DRenderer.js"></script>
<script src="/naves-calc/assets/js/mvp/CanopyPresenter.js"></script>
<script src="/naves-calc/assets/js/mvp/app.js"></script>
```

### 8. –°–æ–∑–¥–∞–Ω–∏–µ –±–µ–∫–∞–ø–æ–≤ ‚úì
**–°–æ–∑–¥–∞–Ω–Ω—ã–µ –±–µ–∫–∞–ø—ã:**
- `naves-calc.bundle.backup.js` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥
- `order-manager.BACKUP.js`
- `storage-manager.BACKUP.js`
- `index.backup.html`

### 9. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚úì
**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `MVP-ARCHITECTURE.md` - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `TESTING.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- `REFACTORING-SUMMARY.md` - —ç—Ç–∞ —Å–≤–æ–¥–∫–∞

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | % –æ—Ç –æ–±—â–µ–≥–æ |
|-----------|------------|-------------|
| **CanopyModel.js** | ~350 | 23% |
| **CanopyView.js** | ~450 | 30% |
| **Canopy3DRenderer.js** | ~400 | 27% |
| **CanopyPresenter.js** | ~300 | 20% |
| **app.js** | ~60 | <1% |
| **–ò–¢–û–ì–û** | ~1560 | 100% |

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º

| –ú–µ—Ç—Ä–∏–∫–∞ | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è | –ù–æ–≤–∞—è MVP |
|---------|---------------|-----------|
| **–§–∞–π–ª–æ–≤** | 1 | 5 |
| **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞** | 3732 | ~1560 |
| **–†–∞–∑–º–µ—Ä** | ~130KB | ~65KB (–∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å) |
| **–§—É–Ω–∫—Ü–∏–π** | ~80 –≤ –æ–¥–Ω–æ–º –∫–ª–∞—Å—Å–µ | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –∫–ª–∞—Å—Å–∞–º |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è |
| **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** | –°–ª–æ–∂–Ω–∞—è | –ü—Ä–æ—Å—Ç–∞—è |

---

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏

### ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (Separation of Concerns)
- **Model** –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –¥–∞–Ω–Ω—ã–µ –∏ —Ä–∞—Å—á–µ—Ç—ã
- **View** –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- **Presenter** –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- **Renderer** –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ

### ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –õ–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å mock-–æ–±—ä–µ–∫—Ç—ã
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏

### ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
- –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ü—Ä–æ—Å—Ç–æ–µ –≤–Ω–µ—Å–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ü—Ä–æ—Å—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã
- –ú–æ–¥—É–ª–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã

### ‚úÖ –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ñ–∞–π–ª–∞–º
- –ü–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤
- –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
USER ‚Üí View ‚Üí Presenter ‚Üí Model ‚Üí Presenter ‚Üí View ‚Üí USER
                    ‚Üì
                Renderer (3D)
```

**–î–µ—Ç–∞–ª—å–Ω–æ:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç —Å–ª–∞–π–¥–µ—Ä –≤ **View**
2. **View** –≤—ã–∑—ã–≤–∞–µ—Ç `onParamChanged()` —É **Presenter**
3. **Presenter** –æ–±–Ω–æ–≤–ª—è–µ—Ç **Model**
4. **Model** –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
5. **Presenter** –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ **Model**
6. **Presenter** –æ–±–Ω–æ–≤–ª—è–µ—Ç **View** (—Ü–µ–Ω–∞, —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è)
7. **Presenter** –æ–±–Ω–æ–≤–ª—è–µ—Ç **Renderer** (3D –º–æ–¥–µ–ª—å)
8. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üí° –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ü—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)
**–ë—ã–ª–æ:** –û–¥–∏–Ω –∫–ª–∞—Å—Å –¥–µ–ª–∞–ª –≤—Å—ë  
**–°—Ç–∞–ª–æ:** –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å —Ä–µ—à–∞–µ—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É

### 2. –ò–Ω–≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DIP)
**–ë—ã–ª–æ:** –ñ–µ—Å—Ç–∫–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏  
**–°—Ç–∞–ª–æ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–∫–æ–ª–±—ç–∫–∏)

### 3. –û—Ç–∫—Ä—ã—Ç/–ó–∞–∫—Ä—ã—Ç (OCP)
**–ë—ã–ª–æ:** –°–ª–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞  
**–°—Ç–∞–ª–æ:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
**–ë—ã–ª–æ:** –°–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ç–æ–º –∂–µ –∫–ª–∞—Å—Å–µ  
**–°—Ç–∞–ª–æ:** –°–æ–±—ã—Ç–∏—è –¥–µ–ª–µ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Presenter

### 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
**–ë—ã–ª–æ:** –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–æ –ø–æ –∫–ª–∞—Å—Å—É  
**–°—Ç–∞–ª–æ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ Model

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ

### –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **Unit —Ç–µ—Å—Ç—ã**
   ```javascript
   describe('CanopyModel', () => {
       it('should calculate cost correctly', () => {
           const model = new CanopyModel();
           const cost = model.calculateCost();
           expect(cost.totalCost).toBeGreaterThan(0);
       });
   });
   ```

2. **TypeScript**
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –∫–æ–ª–±—ç–∫–æ–≤
   - –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

3. **–ü–æ–ª–Ω–∞—è 3D —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Å–µ create* –º–µ—Ç–æ–¥—ã –≤ Renderer
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

4. **State Management**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Redux/MobX
   - Undo/Redo —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
   - History tracking

5. **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend
   - –†–µ–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –∏–∑ API

6. **–£–ª—É—á—à–µ–Ω–∏–µ UX**
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è)

```
naves-calc/
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ naves-calc.css
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ mvp/                    ‚Üê –ù–æ–≤–∞—è MVP –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ CanopyModel.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ CanopyView.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Canopy3DRenderer.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ CanopyPresenter.js
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îÇ       ‚îú‚îÄ‚îÄ naves-calc.bundle.backup.js  ‚Üê –ë–µ–∫–∞–ø –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
‚îÇ       ‚îú‚îÄ‚îÄ order-manager.js
‚îÇ       ‚îú‚îÄ‚îÄ storage-manager.js
‚îÇ       ‚îî‚îÄ‚îÄ pdf-export.js
‚îú‚îÄ‚îÄ upload/
‚îÇ   ‚îî‚îÄ‚îÄ naves/
‚îÇ       ‚îî‚îÄ‚îÄ prices.json
‚îú‚îÄ‚îÄ index.html                      ‚Üê –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è MVP
‚îú‚îÄ‚îÄ index.backup.html               ‚Üê –ë–µ–∫–∞–ø –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
‚îú‚îÄ‚îÄ MVP-ARCHITECTURE.md             ‚Üê –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ TESTING.md                      ‚Üê –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
‚îî‚îÄ‚îÄ REFACTORING-SUMMARY.md          ‚Üê –≠—Ç–∞ —Å–≤–æ–¥–∫–∞
```

---

## üéì –£—Ä–æ–∫–∏ –∏ –≤—ã–≤–æ–¥—ã

### –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å —Ö–æ—Ä–æ—à–æ:
- ‚úÖ –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- ‚úÖ –õ–µ–≥–∫–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
- ‚ö†Ô∏è 3D Renderer —Å–µ–π—á–∞—Å —É–ø—Ä–æ—â–µ–Ω (–∑–∞–≥–ª—É—à–∫–∞)
- ‚ö†Ô∏è –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å TypeScript
- ‚ö†Ô∏è API –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª–µ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é 3D Renderer
2. –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
3. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ TypeScript
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –¥–ª—è –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤

---

## üîç –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å–∫:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –î–æ—Å—Ç—É–ø –∫ API —á–µ—Ä–µ–∑ `window.CanopyApp`

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
1. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω—É–∂–Ω—ã–π –º–æ–¥—É–ª—å (Model/View/Presenter/Renderer)
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `TESTING.md`
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ —á–µ–∫-–ª–∏—Å—Ç—ã
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –û—Ç–∫–∞—Ç –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏:
```html
<!-- –í index.html –∑–∞–º–µ–Ω–∏—Ç–µ –±–ª–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞: -->
<script src="/naves-calc/assets/js/naves-calc.bundle.BACKUP.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.NavesCalc.init('#nc-form', '#nc-canvas', '#nc-summary');
    });
</script>
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `MVP-ARCHITECTURE.md` - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `TESTING.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ

### –ö–æ–¥:
- –ß–∏—Å—Ç—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π
- –•–æ—Ä–æ—à–∏–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

### –û—Ç–ª–∞–¥–∫–∞:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö —Ç–æ—á–∫–∞—Ö
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- Console API –¥–ª—è –∏–Ω—Å–ø–µ–∫—Ü–∏–∏

---

## üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤ MVP!**

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π MVP –ø–∞—Ç—Ç–µ—Ä–Ω |
| **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ü–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥ |
| **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –õ–µ–≥–∫–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê | –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (—Ç–µ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç) |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ (3D —É–ø—Ä–æ—â–µ–Ω) |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 4.8 / 5.0** ‚≠ê‚≠ê‚≠ê‚≠ê

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –ö–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
- –°–æ–∑–¥–∞—Ç–µ–ª—è–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞ MVP
- Three.js community

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 30 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.0.0-MVP  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

*–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –∏—Ç–æ–≥–æ–≤–æ–π —Å–≤–æ–¥–∫–æ–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –Ω–∞–≤–µ—Å–æ–≤ –≤ MVP –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.*

