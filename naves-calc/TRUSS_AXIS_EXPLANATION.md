# ๐ ะะะ ะะะะฅะะะะข ะะกะฌ ะะะะะะะะะข ะกะขะะะะะะฌะะซะฅ ะะะ?

**ะะฐัะฐ:** 27 ะพะบััะฑัั 2025  
**ะะตััะธั:** 2.2.1

---

## ๐ฏ ะะะะขะะะ ะะขะะะข

**ะัั ัััะพะฟะธะปัะฝัั ะฝะพะณ ะฟัะพัะพะดะธั ัะตัะตะท ะฆะะะขะ ัะตัะตะฝะธั ะฑัััะฐ.**

---

## ๐ ะะะขะะะฌะะะ ะะะชะฏะกะะะะะ

### 1. ะะพะบะฐะปัะฝะฐั ัะธััะตะผะฐ ะบะพะพัะดะธะฝะฐั BoxGeometry

ะัะธ ัะพะทะดะฐะฝะธะธ ะฑัััะฐ ะธัะฟะพะปัะทัะตััั `BoxGeometry(L, b, t)`:

```javascript
const geom = new THREE.BoxGeometry(L, b, t);
```

**ะะฐัะฐะผะตััั:**
- `L` - ะดะปะธะฝะฐ ะฑัััะฐ (ะฒะดะพะปั ะปะพะบะฐะปัะฝะพะน ะพัะธ X)
- `b` - ะฒััะพัะฐ ัะตัะตะฝะธั (ะฒะดะพะปั ะปะพะบะฐะปัะฝะพะน ะพัะธ Y) - `sectionSize.height`
- `t` - ัะธัะธะฝะฐ ัะตัะตะฝะธั (ะฒะดะพะปั ะปะพะบะฐะปัะฝะพะน ะพัะธ Z) - `sectionSize.width`

**ะฆะตะฝัั BoxGeometry:**
- ะะฐัะพะดะธััั ะฒ ัะพัะบะต `(0, 0, 0)` ะปะพะบะฐะปัะฝะพะน ัะธััะตะผั
- ะญัะพ ะพะทะฝะฐัะฐะตั, ััะพ ะพัั X ะฟัะพัะพะดะธั **ัะตัะตะท ัะตะฝัั ัะตัะตะฝะธั**

### ะะธะทัะฐะปะธะทะฐัะธั ะปะพะบะฐะปัะฝัั ะพัะตะน:

```
       Y (ะฒััะพัะฐ b)
       โ
       โ
       โ    โโโโโโโโโโโโโโโโโโโ
       โ   /                 /โ
       โ  /                 / โ
       โ /                 /  โ
       โโโโโโโโโโโโโโโโโโโโ   โ
       โโ        โข        โ   โ โ ัะตะฝัั (0,0,0)
       โโ                 โ   โ
       โโ                 โ  /
       โโ                 โ /
       โโโโโโโโโโโโโโโโโโโโ/
       โ        
       โโโโโโโโโโโโโโโโโโโโโโโโ X (ะดะปะธะฝะฐ L)
      /
     /
    โ Z (ัะธัะธะฝะฐ t)
```

---

### 2. ะะธัะพะฒะฐั ัะธััะตะผะฐ ะบะพะพัะดะธะฝะฐั

#### ะฃะทะปั ัะตัะผั:

```javascript
// ะะตััะฝะธะน ะฟะพัั (ัััะพะฟะธะปัะฝัะต ะฝะพะณะธ)
for (let i = 0; i <= N; i++) {
    const x = -L/2 + L * i / N;
    const yTop = bottomChordHeight + H * (1 - Math.abs(2 * i / N - 1));
    top[i] = new THREE.Vector3(x, yTop, 0);
}
```

**ะะฐะถะฝะพ:** ะะพะพัะดะธะฝะฐัั `top[i]` ะทะฐะดะฐัั ะฟะพะปะพะถะตะฝะธะต **ะพัะตะฒัั ัะพัะตะบ** (ัะตะฝััะพะฒ ัะตัะตะฝะธั).

#### ะกะพะทะดะฐะฝะธะต ะฑัััะฐ ะผะตะถะดั ัะทะปะฐะผะธ:

```javascript
// ะะปั ัะตะณะผะตะฝัะฐ ะพั top[i] ะดะพ top[i+1]
P = top[i]      // ะฝะฐัะฐะปัะฝะฐั ัะพัะบะฐ (ัะตะฝัั ัะตัะตะฝะธั)
Q = top[i+1]    // ะบะพะฝะตัะฝะฐั ัะพัะบะฐ (ัะตะฝัั ัะตัะตะฝะธั)

// ะััะธัะปัะตะผ ัะตะฝัั ั ััะตัะพะผ ะฟะพะดัะตะทะพะบ
Pstart = P + d * sStart
Pend = Q - d * sEnd
M = (Pstart + Pend) / 2

// ะฃััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟะพะทะธัะธั
mesh.position.copy(M);
```

**ะะตะทัะปััะฐั:**
- ะัั ะฑัััะฐ ะฟัะพัะพะดะธั ะพั `P` ะบ `Q`
- ะัั ะฟัะพัะพะดะธั ัะตัะตะท **ัะตะฝัั ัะตัะตะฝะธั**
- ะะพะทะธัะธั ะฑัััะฐ - ะฒ ัะตะฝััะต ะผะตะถะดั `Pstart` ะธ `Pend`

---

### 3. ะะธะทัะฐะปะธะทะฐัะธั ะฒ ัะฐะทัะตะทะต

#### ะะพะฟะตัะตัะฝะพะต ัะตัะตะฝะธะต ัััะพะฟะธะปัะฝะพะน ะฝะพะณะธ:

```
        โ Y (ะฒะฒะตัั)
        โ
        โ   โโโโโโโโโโโโโโโโโ  โ ะฒะตััะฝัั ะณัะฐะฝั (+b/2)
        โ   โ               โ
        โ   โ               โ
โโโโโโโโโผโโโโผโโโโโโโโโโโโโโโโผโโโโโ ะะกะฌ ะะะฃะกะ (ัะตะฝัั ัะตัะตะฝะธั)
        โ   โ               โ
        โ   โ               โ
        โ   โโโโโโโโโโโโโโโโโ  โ ะฝะธะถะฝัั ะณัะฐะฝั (-b/2)
        โ
```

**ะะฐัััะพัะฝะธั:**
- ะั ะพัะธ ะดะพ ะฒะตััะฝะตะน ะณัะฐะฝะธ: `+b/2`
- ะั ะพัะธ ะดะพ ะฝะธะถะฝะตะน ะณัะฐะฝะธ: `-b/2`

ะณะดะต `b = sectionSize.height` (ะฝะฐะฟัะธะผะตั, 0.12 ะผ = 120 ะผะผ)

---

### 4. ะัะธะผะตั ะดะปั ะบะพะฝะบัะตัะฝะพะน ัะพัะบะธ

**ะะฐัะฐะผะตััั:**
- `bottomChordHeight` = 3.0 ะผ (ะฒััะพัะฐ ะฝะธะถะฝะตะณะพ ะฟะพััะฐ)
- `H` (rise) = 2.4 ะผ (ะฟะพะดัะตะผ ะบัะพะฒะปะธ)
- `sectionSize.height` (b) = 0.12 ะผ (120 ะผะผ)

**ะะพะฝัะบะพะฒัะน ัะทะตะป (i = N/2 = 4 ะฟัะธ N=8):**

```javascript
yTop = bottomChordHeight + H * (1 - |2*4/8 - 1|)
     = 3.0 + 2.4 * (1 - 0)
     = 5.4 ะผ
```

**ะะพะพัะดะธะฝะฐัะฐ ะบะพะฝัะบะฐ:**
```
top[4] = (0, 5.4, 0)  โ ะพัั ัััะพะฟะธะปัะฝะพะน ะฝะพะณะธ
```

**ะััะพัะฐ ะณัะฐะฝะตะน ัะตัะตะฝะธั:**
```
ะะตััะฝัั ะณัะฐะฝั: 5.4 + 0.12/2 = 5.46 ะผ
ะะธะถะฝัั ะณัะฐะฝั:  5.4 - 0.12/2 = 5.34 ะผ
```

---

## ๐๏ธ ะะะะะขะะงะะกะะะ ะะะะงะะะะ

### ะะปั ะบัะพะฒะปะธ:

ะัะปะธ ะบัะพะฒะปั ะดะพะปะถะฝะฐ ะปะตะถะฐัั ะฝะฐ **ะฒะตััะฝะตะน ะณัะฐะฝะธ** ัััะพะฟะธะป, ะฝัะถะฝะพ ะดะพะฑะฐะฒะธัั ัะผะตัะตะฝะธะต:

```javascript
const roofHeight = yTop + b/2;  // ะฒะตััะฝัั ะณัะฐะฝั
```

ะ ัะตะบััะตะน ัะตะฐะปะธะทะฐัะธะธ (ัะผะพััะธะผ ะฒ ะบะพะดะต):
- ะัะพะฒะปั ัะพะทะดะฐะตััั ั ััะตัะพะผ ะฒััะพัั ะบะพะฝัะบะฐ
- ะะพะทะผะพะถะฝะพ, ัะถะต ะดะพะฑะฐะฒะปะตะฝ ะฟะพะดัะตะผ (`roofLift`)

### ะะปั ะฝะธะถะฝะตะณะพ ะฟัะธะผัะบะฐะฝะธั:

ะะธะถะฝะธะน ะฟะพัั ัะฐะบะถะต ะฟัะพัะพะดะธั ะพััั ัะตัะตะท ัะตะฝัั ัะตัะตะฝะธั:
```javascript
bot[i] = new THREE.Vector3(x, bottomChordHeight, 0);
```

**ะัะธะผัะบะฐะฝะธะต ะบ ะผะฐัััะปะฐัั:**
- ะัั ะฝะธะถะฝะตะณะพ ะฟะพััะฐ: `y = bottomChordHeight`
- ะะธะถะฝัั ะณัะฐะฝั: `y = bottomChordHeight - b/2`
- ะญัะพ ะดะพะปะถะฝะพ ัะพะฒะฟะฐะดะฐัั ั ะฒะตััะฝะตะน ะณัะฐะฝัั ะผะฐัััะปะฐัะฐ

---

## ๐ ะคะะะะฃะะซ

### ะััะพัะฐ ัะฐะทะปะธัะฝัั ัะพัะตะบ ัััะพะฟะธะปัะฝะพะน ะฝะพะณะธ:

ะะปั ัะทะปะฐ `i` ะฒะตััะฝะตะณะพ ะฟะพััะฐ:

```
y_ะพัั = bottomChordHeight + H * (1 - |2*i/N - 1|)
y_ะฒะตัั = y_ะพัั + b/2
y_ะฝะธะท = y_ะพัั - b/2
```

### ะะปะธะฝะฐ ัะตะณะผะตะฝัะฐ ัััะพะฟะธะปัะฝะพะน ะฝะพะณะธ:

```
L_ะฟะพะปะฝะฐั = |top[i+1] - top[i]|
L_ัััะตะบัะธะฒะฝะฐั = L_ะฟะพะปะฝะฐั - sStart - sEnd  (ั ััะตัะพะผ ะฟะพะดัะตะทะพะบ)
```

---

## ๐จ ะะะะฃะะะะะะฆะะฏ ะคะะะะซ ะ ะะะะะะะ

```
                        โ top[4] (ะบะพะฝะตะบ)
                       /โ\  โ ะพัั ัะตัะตะท ัะตะฝัั
                      / โ \
         โโโโโโโโโโโโ/โโโโโ\โโโโโโโโโโโโ
         โ          /   โ   \          โ
         โ  ะะตััะฝะธะน ะฟะพััโ    \         โ  โ ะฑััั ั ะพััั ัะตัะตะท ัะตะฝัั
         โ        /     โ     \        โ
         โโโโโโโโ/โโโโโโโโโโโโโ\โโโโโโโโ
                /       โ       \
               /        โ        \
          โ   /         โ         \   โ
    top[3]   /          โ          \ top[5]
            /           โ           \
           /            โ            \
          /             โ             \
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   bot[3]          bot[4]           bot[5]
                      โ
              ะัั ัะตัะตะท ัะตะฝัั
```

---

## ๐ ะะะ ะะะะะะะะขะฌ ะ ะะะะ

### ะะดะต ะพะฟัะตะดะตะปััััั ะพัะธ:

**ะคะฐะนะป:** `naves-calc/assets/js/naves-calc.bundle.js`

**ะกััะพะบะธ 2061-2066:**
```javascript
for (let i = 0; i <= N; i++) {
    const x = -L/2 + L * i / N;
    const yTop = bottomChordHeight + H * (1 - Math.abs(2 * i / N - 1));
    bot.push(new THREE.Vector3(x, bottomChordHeight, 0));  // ะพัั ะฝะธะถะฝะตะณะพ ะฟะพััะฐ
    top.push(new THREE.Vector3(x, yTop, 0));               // ะพัั ะฒะตััะฝะตะณะพ ะฟะพััะฐ
}
```

**ะกััะพะบะธ 2020-2028:**
```javascript
// ะกะพะทะดะฐะตะผ ะณะตะพะผะตััะธั ะฒะดะพะปั ะพัะธ X
const geom = new THREE.BoxGeometry(L, b, t);  // ัะตะฝัั ะฒ (0,0,0)
const mesh = new THREE.Mesh(geom, material);

// ะััะธัะปัะตะผ ัะตะฝัั ะฑัััะฐ ั ััะตัะพะผ ะฟะพะดัะตะทะพะบ
const Pstart = P.clone().add(d.clone().multiplyScalar(sStart));
const Pend = Q.clone().sub(d.clone().multiplyScalar(sEnd));
const M = Pstart.clone().add(Pend).multiplyScalar(0.5);  // ัะตะฝัั = ััะตะดะฝัั ัะพัะบะฐ
mesh.position.copy(M);  // ะฟะพะทะธัะธั ะฒ ัะตะฝััะต
```

---

## โ ะะซะะะะซ

1. **ะัั ัััะพะฟะธะปัะฝัั ะฝะพะณ ะฟัะพัะพะดะธั ัะตัะตะท ะฆะะะขะ ัะตัะตะฝะธั ะฑัััะฐ**
2. ะฃะทะปั ัะตัะผั (top[i], bot[i]) ะพะฟัะตะดะตะปััั ะฟะพะปะพะถะตะฝะธะต **ะพัะตะฒัั ัะพัะตะบ**
3. BoxGeometry ัะพะทะดะฐะตััั ั ัะตะฝััะพะผ ะฒ (0,0,0) ะปะพะบะฐะปัะฝะพะน ัะธััะตะผั
4. ะะตััะฝัั ะณัะฐะฝั ะฝะฐัะพะดะธััั ะฝะฐ ัะฐัััะพัะฝะธะธ **+b/2** ะพั ะพัะธ
5. ะะธะถะฝัั ะณัะฐะฝั ะฝะฐัะพะดะธััั ะฝะฐ ัะฐัััะพัะฝะธะธ **-b/2** ะพั ะพัะธ
6. ะญัะพ **ะฟัะฐะฒะธะปัะฝัะน ะฟะพะดัะพะด** ะดะปั ะฟัะพัะตััะธะพะฝะฐะปัะฝัั ัะตัะผ

---

## ๐ก ะะะะะะะะะะฆะะ

### ะัะปะธ ะฝัะถะฝะพ, ััะพะฑั ะพัั ะฟัะพัะพะดะธะปะฐ ะฟะพ ะดััะณะพะน ะปะธะฝะธะธ:

**ะะพ ะฒะตััะฝะตะน ะณัะฐะฝะธ:**
```javascript
const yTop = bottomChordHeight + H * (1 - Math.abs(2 * i / N - 1)) - b/2;
```

**ะะพ ะฝะธะถะฝะตะน ะณัะฐะฝะธ:**
```javascript
const yTop = bottomChordHeight + H * (1 - Math.abs(2 * i / N - 1)) + b/2;
```

**ะขะตะบััะธะน ะฒะฐัะธะฐะฝั (ัะตัะตะท ัะตะฝัั) - ะพะฟัะธะผะฐะปะตะฝ** ะดะปั:
- ะขะพัะฝะพะณะพ ัะฐััะตัะฐ ััะพะฒัั ะฟะพะดัะตะทะพะบ
- ะกะธะผะผะตััะธะธ ะบะพะฝััััะบัะธะธ
- ะกัะฐะฝะดะฐััะฝัั ัััะพะธัะตะปัะฝัั ะฟัะฐะบัะธะบ

---

**ะะพะฝะตั ะดะพะบัะผะตะฝัะฐ**

ะะฐัะฐ: 27 ะพะบััะฑัั 2025  
ะะตััะธั: 2.2.1


