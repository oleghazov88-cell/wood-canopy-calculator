<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–∞–≤–µ—Å–æ–≤</title>
    <link rel="stylesheet" href="/naves-calc/assets/css/naves-calc.css">
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è 3D –æ–∫–Ω–∞ */
        #nc-canvas {
            will-change: transform;
            transform: translateZ(0);
        }
        
        /* –ü–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ */
        .performance-panel {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
            min-width: 200px;
            backdrop-filter: blur(10px);
        }
        
        .performance-panel.hidden {
            display: none;
        }
        
        .performance-stats {
            margin-bottom: 8px;
        }
        
        .performance-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }
        
        .performance-stat-label {
            color: #ccc;
        }
        
        .performance-stat-value {
            color: #fff;
            font-weight: bold;
        }
        
        .performance-controls {
            border-top: 1px solid #444;
            padding-top: 8px;
            margin-top: 8px;
        }
        
        .quality-selector {
            display: flex;
            gap: 5px;
            margin-bottom: 8px;
        }
        
        .quality-btn {
            padding: 4px 8px;
            background: #333;
            color: white;
            border: 1px solid #555;
            border-radius: 4px;
            cursor: pointer;
            font-size: 10px;
        }
        
        .quality-btn.active {
            background: #20B5B9;
            border-color: #20B5B9;
        }
        
        .performance-toggle {
            background: #333;
            color: white;
            border: 1px solid #555;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 10px;
            width: 100%;
        }
        
        .naves-calc__view {
            position: relative;
            overflow: hidden;
        }
        
        /* –°–¢–ò–õ–ò –î–õ–Ø –û–¢–õ–ê–î–ö–ò –ò –†–ê–ó–†–ê–ë–û–¢–ö–ò */
        .debug-layout {
            display: flex;
            gap: 20px;
            padding: 20px;
            background: #f5f5f5;
            min-height: 100vh;
        }
        
        .debug-3d-container {
            flex: 2;
            min-height: calc(100vh - 40px);
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .debug-controls {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }
        
        .debug-3d-canvas {
            width: 100% !important;
            height: 100% !important;
            min-height: calc(100vh - 40px);
        }
        
        .debug-post-buttons {
            margin-bottom: 30px;
        }
        
        .debug-post-buttons h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 18px;
        }
        
        .debug-post-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ –±–ª–æ–∫–∞ –±–∞–ª–æ–∫ */
        .debug-beam-buttons {
            margin-bottom: 30px;
            padding: 20px;
            background: #f0f9ff;
            border-radius: 12px;
            border: 2px solid #20B5B9;
        }
        
        .debug-beam-buttons h3 {
            margin-bottom: 15px;
            color: #20B5B9;
            font-size: 18px;
        }
        
        .debug-beam-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .debug-beam-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        
        .debug-beam-item:hover {
            border-color: #20B5B9;
            background: #f0f9ff;
            transform: translateX(5px);
        }
        
        .debug-beam-item input[type="radio"] {
            margin-right: 12px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .debug-beam-item input[type="radio"]:checked {
            accent-color: #20B5B9;
        }
        
        .debug-beam-item label {
            display: flex;
            align-items: center;
            cursor: pointer;
            flex: 1;
            font-size: 14px;
        }
        
        .debug-beam-item.selected {
            background: #20B5B9;
            border-color: #20B5B9;
            color: white;
        }
        
        .debug-beam-size {
            font-weight: 700;
            font-size: 16px;
            margin-right: 10px;
            min-width: 100px;
        }
        
        .debug-beam-desc {
            color: #666;
            font-size: 12px;
        }
        
        .debug-beam-item.selected .debug-beam-desc {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .debug-post-item {
            text-align: center;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .debug-post-item:hover {
            border-color: #20B5B9;
            background: #f0f9ff;
        }
        
        .debug-post-item input[type="radio"] {
            display: none;
        }
        
        .debug-post-item input[type="radio"]:checked + label {
            background: #20B5B9;
            color: white;
        }
        
        .debug-post-item label {
            display: block;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .debug-post-image {
            width: 60px;
            height: 60px;
            margin: 0 auto 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .debug-post-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* –°–ö–†–´–¢–ò–ï –†–ê–°–ö–û–°–û–í –ù–ê –í–†–ï–ú–Ø –û–¢–õ–ê–î–ö–ò */
        .debug-braces-hidden {
            display: none !important;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–∞–≤–æ–≥–æ –±–ª–æ–∫–∞ —Å 3D –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å test.html */
        .calculator-right-img-block {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.12);
            border: 1px solid #e9ecef;
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        
        .path-top {
            margin-bottom: 30px;
        }
        
        .path-top-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
        }
        
        .price {
            font-family: var(--nc-font-heading);
            font-size: 30px;
            font-weight: 600;
            color: #EB1B24;
        }
        
        .link-360 {
            color: #666;
            text-decoration: none;
            font-size: 15px;
        }
        
        .button-row {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px 20px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }
        
        .btn-63 {
            height: 63px;
        }
        
        .bg-red {
            background: linear-gradient(90deg, #EB1B24 0%, #FF5058 100%);
            color: white;
        }
        
        .bg-pink {
            background: linear-gradient(90deg, #FF6B9D 0%, #FF8E9B 100%);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .images-block {
            flex: 1;
            min-height: 400px;
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .images-button {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }
        
        .save-btn {
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .save-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .path-bottom {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 18px;
            font-weight: 500;
            margin-top: 20px;
        }
        
        .scroll-link {
            color: #EB1B24;
            text-decoration: none;
            line-height: 1.1;
        }
        
        .scroll-link:hover {
            text-decoration: underline;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π —Å–ª–∞–π–¥–µ—Ä–æ–≤ */
        .slider-description {
            margin-bottom: 10px;
        }
        
        .description-text {
            font-size: 14px;
            color: #666;
            font-style: italic;
            line-height: 1.4;
        }
        
        .naves-calc__view canvas {
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π */
        .camera-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 100;
        }
        
        .camera-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .camera-btn:hover {
            background: rgba(32, 181, 185, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(32, 181, 185, 0.3);
        }
        
        .camera-btn:active {
            transform: translateY(0);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–∞–º–µ—Ä—ã */
        @media (max-width: 768px) {
            .camera-controls {
                top: 10px;
                right: 10px;
                gap: 6px;
            }
            
            .camera-btn {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
            
            .calculator-right-img-block {
                padding: 20px;
                border-radius: 15px;
            }
            
            .price {
                font-size: 24px;
            }
            
            .button-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn-63 {
                height: 50px;
            }
            
            .images-block {
                min-height: 300px;
            }
            
            .path-bottom {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .hide_992 {
                display: none !important;
            }
        }
        
        @media (max-width: 576px) {
            .calculator-right-img-block {
                padding: 15px;
                border-radius: 10px;
            }
            
            .price {
                font-size: 20px;
            }
            
            .btn {
                font-size: 14px;
                padding: 12px 16px;
            }
            
            .images-block {
                min-height: 250px;
            }
            
            .images-button {
                top: 10px;
                right: 10px;
            }
            
            .save-btn {
                width: 35px;
                height: 35px;
            }
        }
    </style>
</head>
<body>
    <!-- –û–¢–õ–ê–î–û–ß–ù–´–ô –ú–ê–ö–ï–¢ –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò -->
    <div class="debug-layout">
        <!-- 3D –û–ö–ù–û -->
        <div class="debug-3d-container">
            <canvas id="nc-canvas" class="debug-3d-canvas"></canvas>
        </div>
        
        <!-- –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
        <div class="debug-controls">
            <!-- –ö–ù–û–ü–ö–ò –í–´–ë–û–†–ê –°–¢–û–õ–ë–û–í -->
            <div class="debug-post-buttons">
                <h3>–í—ã–±–æ—Ä —Å—Ç–æ–ª–±–æ–≤</h3>
                <div class="debug-post-grid">
                    <div class="debug-post-item">
                        <input type="radio" name="type-stolbi" id="debug-stolbi-1" value="var-1" checked>
                        <label for="debug-stolbi-1">
                            <div class="debug-post-image">
                                <img src="../stolb/st1 .webp" alt="var-1">
                            </div>
                            <div><strong>var-1</strong></div>
                            <div style="font-size: 10px; color: #666;">–ü–æ–¥–ø—è—Ç–Ω–∏–∫ —Å–≤–µ—Ä—Ö—É</div>
                        </label>
                    </div>
                    
                    <div class="debug-post-item">
                        <input type="radio" name="type-stolbi" id="debug-stolbi-2" value="var-2">
                        <label for="debug-stolbi-2">
                            <div class="debug-post-image">
                                <img src="../stolb/st2.webp" alt="var-2">
                            </div>
                            <div><strong>var-2</strong></div>
                            <div style="font-size: 10px; color: #666;">–ü—Ä–æ—Å—Ç–æ–π —Å—Ç–æ–ª–±</div>
                        </label>
                    </div>
                    
                    <div class="debug-post-item">
                        <input type="radio" name="type-stolbi" id="debug-stolbi-3" value="var-3">
                        <label for="debug-stolbi-3">
                            <div class="debug-post-image">
                                <img src="../stolb/st3 .webp" alt="var-3">
                            </div>
                            <div><strong>var-3</strong></div>
                            <div style="font-size: 10px; color: #666;">–° –∫–∞–ø–∏—Ç–µ–ª—å—é</div>
                        </label>
                    </div>
                    
                    <div class="debug-post-item">
                        <input type="radio" name="type-stolbi" id="debug-stolbi-4" value="var-4">
                        <label for="debug-stolbi-4">
                            <div class="debug-post-image">
                                <img src="../stolb/st4.webp" alt="var-4">
                            </div>
                            <div><strong>var-4</strong></div>
                            <div style="font-size: 10px; color: #666;">–ü–æ–¥–ø—è—Ç–Ω–∏–∫ + –∫–∞–ø–∏—Ç–µ–ª—å</div>
                        </label>
                    </div>
                    
                    <div class="debug-post-item">
                        <input type="radio" name="type-stolbi" id="debug-stolbi-5" value="var-5">
                        <label for="debug-stolbi-5">
                            <div class="debug-post-image">
                                <img src="../stolb/st5.webp" alt="var-5">
                            </div>
                            <div><strong>var-5</strong></div>
                            <div style="font-size: 10px; color: #666;">–ü–æ–¥–ø—è—Ç–Ω–∏–∫ —Å–Ω–∏–∑—É</div>
                        </label>
                    </div>
                    
                    <div class="debug-post-item">
                        <input type="radio" name="type-stolbi" id="debug-stolbi-6" value="var-6">
                        <label for="debug-stolbi-6">
                            <div class="debug-post-image">
                                <img src="../stolb/st6.webp" alt="var-6">
                            </div>
                            <div><strong>var-6</strong></div>
                            <div style="font-size: 10px; color: #666;">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π</div>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- –ö–ù–û–ü–ö–ò –í–´–ë–û–†–ê –°–ï–ß–ï–ù–ò–Ø –ë–ê–õ–û–ö -->
            <div class="debug-beam-buttons">
                <h3>üîß –°–µ—á–µ–Ω–∏–µ –±–∞–ª–æ–∫ (—Ñ–µ—Ä–º—ã)</h3>
                <div class="debug-beam-options">
                    <div class="debug-beam-item" onclick="selectBeam(this, 'planed-45x190')">
                        <input type="radio" name="beam-section" id="beam-45x190" value="planed-45x190" checked>
                        <label for="beam-45x190">
                            <span class="debug-beam-size">45√ó190 –º–º</span>
                            <span class="debug-beam-desc">–°—Ç—Ä–æ–≥–∞–Ω–∞—è –¥–æ—Å–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</span>
                        </label>
                    </div>
                    
                    <div class="debug-beam-item" onclick="selectBeam(this, 'planed-35x190')">
                        <input type="radio" name="beam-section" id="beam-35x190" value="planed-35x190">
                        <label for="beam-35x190">
                            <span class="debug-beam-size">35√ó190 –º–º</span>
                            <span class="debug-beam-desc">–°—Ç—Ä–æ–≥–∞–Ω–∞—è –¥–æ—Å–∫–∞ (–æ–±–ª–µ–≥—á–µ–Ω–Ω–∞—è)</span>
                        </label>
                    </div>
                    
                    <div class="debug-beam-item" onclick="selectBeam(this, 'planed-50x150')">
                        <input type="radio" name="beam-section" id="beam-50x150" value="planed-50x150">
                        <label for="beam-50x150">
                            <span class="debug-beam-size">50√ó150 –º–º</span>
                            <span class="debug-beam-desc">–°—Ç—Ä–æ–≥–∞–Ω–∞—è –¥–æ—Å–∫–∞ (–≤—ã—Å–æ–∫–∞—è)</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- –ö–ù–û–ü–ö–ò –í–´–ë–û–†–ê –¢–ò–ü–ê –§–ï–†–ú -->
            <div class="debug-truss-buttons" style="margin-top: 20px;">
                <h3>üèóÔ∏è –¢–∏–ø —Ñ–µ—Ä–º (—Ñ–æ—Ä–º–∞ –∫—Ä–æ–≤–ª–∏)</h3>
                <div class="debug-truss-options" style="display: flex; flex-direction: column; gap: 10px;">
                    <div class="debug-truss-item" style="display: flex; align-items: center; padding: 10px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; transition: all 0.3s; position: relative;" onclick="selectTrussType(this, 'var-1')">
                        <span style="position: absolute; top: 5px; right: 8px; background: #20B5B9; color: white; font-size: 10px; font-weight: 600; padding: 2px 6px; border-radius: 4px;">var-1</span>
                        <input type="radio" name="type-karkas" id="truss-var-1" value="var-1" style="margin-right: 10px;">
                        <label for="truss-var-1" style="flex: 1; cursor: pointer;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 60px; height: 40px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                    <svg viewBox="0 0 100 60" style="width: 50px; height: 30px;">
                                        <path d="M10 50 L90 50 L90 20 L10 40 Z" fill="#20B5B9"/>
                                    </svg>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: #333;">–û–¥–Ω–æ—Å–∫–∞—Ç–Ω—ã–π</div>
                                    <div style="font-size: 11px; color: #666;">–ë–∞–ª–æ—á–Ω–∞—è —Ñ–µ—Ä–º–∞ —Å –Ω–∞–∫–ª–æ–Ω–æ–º</div>
                                </div>
                            </div>
                        </label>
                    </div>
                    
                    <div class="debug-truss-item" style="display: flex; align-items: center; padding: 10px; border: 2px solid #20B5B9; border-radius: 8px; cursor: pointer; transition: all 0.3s; background: #f0fbfb; position: relative;" onclick="selectTrussType(this, 'var-2')">
                        <span style="position: absolute; top: 5px; right: 8px; background: #20B5B9; color: white; font-size: 10px; font-weight: 600; padding: 2px 6px; border-radius: 4px;">var-2</span>
                        <input type="radio" name="type-karkas" id="truss-var-2" value="var-2" checked style="margin-right: 10px;">
                        <label for="truss-var-2" style="flex: 1; cursor: pointer;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 60px; height: 40px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                    <svg viewBox="0 0 100 60" style="width: 50px; height: 30px;">
                                        <path d="M10 50 L90 50 L50 20 Z" fill="#20B5B9"/>
                                    </svg>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: #333;">–î–≤—É—Å–∫–∞—Ç–Ω—ã–π</div>
                                    <div style="font-size: 11px; color: #666;">–§–µ—Ä–º–∞ —Å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Å—Ç–æ–π–∫–æ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</div>
                                </div>
                            </div>
                        </label>
                    </div>
                    
                    <div class="debug-truss-item" style="display: flex; align-items: center; padding: 10px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; transition: all 0.3s; position: relative;" onclick="selectTrussType(this, 'var-3')">
                        <span style="position: absolute; top: 5px; right: 8px; background: #20B5B9; color: white; font-size: 10px; font-weight: 600; padding: 2px 6px; border-radius: 4px;">var-3</span>
                        <input type="radio" name="type-karkas" id="truss-var-3" value="var-3" style="margin-right: 10px;">
                        <label for="truss-var-3" style="flex: 1; cursor: pointer;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 60px; height: 40px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                    <svg viewBox="0 0 100 60" style="width: 50px; height: 30px;">
                                        <path d="M10 50 Q50 15 90 50" fill="none" stroke="#20B5B9" stroke-width="3"/>
                                        <line x1="10" y1="50" x2="90" y2="50" stroke="#20B5B9" stroke-width="3"/>
                                    </svg>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: #333;">–ê—Ä–æ—á–Ω—ã–π</div>
                                    <div style="font-size: 11px; color: #666;">–¢—Ä–µ—É–≥–æ–ª—å–Ω–∞—è —Ñ–µ—Ä–º–∞ –±–µ–∑ —Å—Ç–æ–π–∫–∏</div>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ü–†–û–ï–ö–¢–ï -->
            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <h4 style="margin: 0 0 10px 0; color: #333;">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                <div style="font-size: 14px; color: #666;">
                    <div>–¶–µ–Ω–∞: <span id="debug-total-price">256 000 ‚ÇΩ</span></div>
                    <div>–†–∞–∑–º–µ—Ä—ã: <span id="debug-dimensions">6x4 –º</span></div>
                    <div>–í—ã—Å–æ—Ç–∞: <span id="debug-height">3 –º</span></div>
                    <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid #ddd;">
                        <strong style="color: #20B5B9;">–ü—Ä–æ–¥–æ–ª—å–Ω—ã–µ –±–∞–ª–∫–∏ (–º–∞—É—ç—Ä–ª–∞—Ç—ã):</strong>
                        <div style="margin-top: 4px;">
                            –°–µ—á–µ–Ω–∏–µ: <span id="debug-longitudinal-beam" style="font-weight: 600; color: #20B5B9;">150√ó150 –º–º</span>
                        </div>
                    </div>
                    <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid #ddd;">
                        <strong style="color: #20B5B9;">–§–µ—Ä–º—ã (—Å—Ç—Ä–æ–ø–∏–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞):</strong>
                        <div style="margin-top: 4px;">
                            –î–æ—Å–∫–∞: <span id="debug-beam-section" style="font-weight: 600; color: #20B5B9;">45√ó190 –º–º</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü–ê–†–ê–ú–ï–¢–†–´ –ö–û–ù–°–¢–†–£–ö–¶–ò–ò (–ë–ï–ì–£–ù–ö–ò) -->
            <div style="margin-top: 20px; padding: 15px; background: #ffffff; border: 2px solid #20B5B9; border-radius: 8px;">
                <h4 style="margin: 0 0 15px 0; color: #20B5B9;">‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</h4>
                
                <!-- –î–ª–∏–Ω–∞ –Ω–∞–≤–µ—Å–∞ -->
                <div style="margin-bottom: 15px;">
                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 5px; color: #333;">
                        –î–ª–∏–Ω–∞: <span id="length-value" style="color: #20B5B9;">11.0 –º</span>
                    </label>
                    <input type="range" id="length-slider" min="30" max="200" value="110" step="5" 
                           style="width: 100%;" onchange="updateLength(this.value)">
                    <div style="display: flex; justify-content: space-between; font-size: 11px; color: #999;">
                        <span>3 –º</span><span>20 –º</span>
        </div>
    </div>
    
                <!-- –®–∏—Ä–∏–Ω–∞ –Ω–∞–≤–µ—Å–∞ -->
                <div style="margin-bottom: 15px;">
                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 5px; color: #333;">
                        –®–∏—Ä–∏–Ω–∞: <span id="width-value" style="color: #20B5B9;">6.0 –º</span>
                    </label>
                    <input type="range" id="width-slider" min="30" max="100" value="60" step="5" 
                           style="width: 100%;" onchange="updateWidth(this.value)">
                    <div style="display: flex; justify-content: space-between; font-size: 11px; color: #999;">
                        <span>3 –º</span><span>10 –º</span>
                    </div>
                </div>
                
                <!-- –í—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±–æ–≤ -->
                <div style="margin-bottom: 15px;">
                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 5px; color: #333;">
                        –í—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±–æ–≤: <span id="height-value" style="color: #20B5B9;">3.0 –º</span>
                    </label>
                    <input type="range" id="height-slider" min="20" max="50" value="30" step="2" 
                           style="width: 100%;" onchange="updateHeight(this.value)">
                    <div style="display: flex; justify-content: space-between; font-size: 11px; color: #999;">
                        <span>2 –º</span><span>5 –º</span>
                    </div>
                </div>
                
                <!-- –í—ã—Å–æ—Ç–∞ –∫–æ–Ω—å–∫–∞ -->
                <div style="margin-bottom: 15px;">
                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 5px; color: #333;">
                        –í—ã—Å–æ—Ç–∞ –∫–æ–Ω—å–∫–∞: <span id="roof-height-value" style="color: #20B5B9;">1.5 –º</span>
                    </label>
                    <input type="range" id="roof-height-slider" min="5" max="30" value="15" step="1" 
                           style="width: 100%;" onchange="updateRoofHeight(this.value)">
                    <div style="display: flex; justify-content: space-between; font-size: 11px; color: #999;">
                        <span>0.5 –º</span><span>3 –º</span>
                    </div>
                </div>
                
                <!-- –®–∞–≥ —Å—Ç–æ–ª–±–æ–≤ -->
                <div style="margin-bottom: 0;">
                    <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 5px; color: #333;">
                        –®–∞–≥ —Å—Ç–æ–ª–±–æ–≤: <span id="post-spacing-value" style="color: #20B5B9;">2.5 –º</span>
                    </label>
                    <input type="range" id="post-spacing-slider" min="15" max="35" value="25" step="5" 
                           style="width: 100%;" onchange="updatePostSpacing(this.value)">
                    <div style="display: flex; justify-content: space-between; font-size: 11px; color: #999;">
                        <span>1.5 –º</span><span>3.5 –º</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ô –ú–ê–ö–ï–¢ -->
    <div style="display: none;">
        <div class="naves-calc-wrapper">
            <div class="naves-calc">
                <section id="nc-form"></section>
                <section class="naves-calc__view">
                    <div class="calculator-right-img-block">
                        <div class="path-top mb-30">
                            <div class="path-top-info flex aic jcsb mb-25">
                                <div class="price f2 fz30 fw600" id="totalPrice">256 000 ‚ÇΩ</div>
                                <a href="#smeta" class="link-360 fz15 pointer">–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–º–µ—Ç–∞</a>
                            </div>
                            
                            <div class="button-row flex gap-10">
                                <a href="#" class="btn btn-63 bg-red flex aic jcc fxg fz16 fw600 round-10" onclick="makeOrder()">–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑</a>
                                <a href="#" class="btn btn-63 bg-pink flex aic jcc fxg fz16 fw600 round-10" onclick="saveCalculation()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç</a>
                            </div>
                        </div>
                        
                        <div class="images-block flex aic jcc posr bg-f9 round-10">
                            <canvas id="nc-canvas" style="width: 100%; height: 100%;"></canvas>
                        
                        <!-- –ü–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ -->
                        <div id="performance-panel" class="performance-panel">
                            <div class="performance-stats">
                                <div class="performance-stat">
                                    <span class="performance-stat-label">FPS:</span>
                                    <span class="performance-stat-value" id="fps-value">60</span>
                                </div>
                                <div class="performance-stat">
                                    <span class="performance-stat-label">Frame Time:</span>
                                    <span class="performance-stat-value" id="frame-time-value">16.7ms</span>
                                </div>
                                <div class="performance-stat">
                                    <span class="performance-stat-label">Triangles:</span>
                                    <span class="performance-stat-value" id="triangles-value">0</span>
                                </div>
                                <div class="performance-stat">
                                    <span class="performance-stat-label">Draw Calls:</span>
                                    <span class="performance-stat-value" id="draw-calls-value">0</span>
                                </div>
                                <div class="performance-stat">
                                    <span class="performance-stat-label">Quality:</span>
                                    <span class="performance-stat-value" id="quality-value">High</span>
                                </div>
                            </div>
                            
                            <div class="performance-controls">
                                <div class="quality-selector">
                                    <button class="quality-btn" data-quality="low">Low</button>
                                    <button class="quality-btn active" data-quality="medium">Med</button>
                                    <button class="quality-btn" data-quality="high">High</button>
                                </div>
                                <button class="performance-toggle" onclick="togglePerformancePanel()">–°–∫—Ä—ã—Ç—å</button>
                            </div>
                        </div>
                        
                        <div class="images-button absolute">
                            <div class="link-360 flex aic pointer fz15">
                                <span style="font-size: 20px; margin-right: 5px;">üîÑ</span>
                                360¬∞
                            </div>
                            <div class="save-btn flex aic jcc pointer round-5 bg-fff" style="width: 40px; height: 40px; margin-top: 10px;" title="–°–∫–∞—á–∞—Ç—å" onclick="download3DImage()">
                                <span style="font-size: 20px;">üíæ</span>
                            </div>
                        </div>
                        <div class="camera-controls">
                            <button class="camera-btn" id="reset-camera" title="–°–±—Ä–æ—Å–∏—Ç—å –≤–∏–¥">üè†</button>
                            <button class="camera-btn" id="top-view" title="–í–∏–¥ —Å–≤–µ—Ä—Ö—É">‚¨ÜÔ∏è</button>
                            <button class="camera-btn" id="front-view" title="–í–∏–¥ —Å–ø–µ—Ä–µ–¥–∏">üëÅÔ∏è</button>
                            <button class="camera-btn" id="side-view" title="–í–∏–¥ —Å–±–æ–∫—É">‚ÜîÔ∏è</button>
                        </div>
                    </div>
                    
                    <div class="path-bottom flex aic jcsb fz18 fz11m fw500">
                        <div class="link-360">
                            üîÑ –ó–∞–∂–º–∏—Ç–µ –ª–µ–≤—É—é –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è, –∫–æ–ª–µ—Å–∏–∫–æ –¥–ª—è –∑—É–º–∞
                        </div>
                        <a href="#smeta" class="scroll-link red lh110 hide_992">–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–º–µ—Ç–∞</a>
                    </div>
                </div>
                <div id="nc-summary"></div>
            </section>
        </div>

        <!-- –£—Ç–æ—á–Ω–µ–Ω–∏–µ –¥–∏–∑–∞–π–Ω–∞ -->
        <section class="design-refinement">
            <div class="calculator-hide-date mb-10 mb-0m">
                <div class="triger-open flex aic jcsb f2 fz22 fw600 lh110 ttu pointer">—É—Ç–æ—á–Ω–µ–Ω–∏–µ –¥–∏–∑–∞–π–Ω–∞
                    <div class="arrow flex aic jcc bg-red round-7">‚ñº</div>
                </div>
                <div class="calculator-hide-info hide_cl pt-40">
                    <div class="label_cl fz18 fw600 mb-20">–°—Ç–æ–ª–±—ã</div>
                    <div class="type-row-raido">
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input checked type="radio" name="type-stolbi" id="type-stolbi-1" value="var-1">
                                <label for="type-stolbi-1">
                                    <img src="../stolb/st1 .webp" alt="–°—Ç–æ–ª–± 1" style="width: 100%; height: 100%; object-fit: contain;">
                                </label>
                            </div>
                            <div style="text-align: center; margin-top: 5px; font-size: 13px; color: #666;">
                                <strong>1.</strong> –° –ø–æ–¥–ø—è—Ç–Ω–∏–∫–æ–º<br><span style="font-size: 11px; color: #999;">(–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π)</span>
                            </div>
                        </div>
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input type="radio" name="type-stolbi" id="type-stolbi-2" value="var-2">
                                <label for="type-stolbi-2">
                                    <img src="../stolb/st2.webp" alt="–°—Ç–æ–ª–± 2" style="width: 100%; height: 100%; object-fit: contain;">
                                </label>
                            </div>
                            <div style="text-align: center; margin-top: 5px; font-size: 13px; color: #666;">
                                <strong>2.</strong> –°—Ç–æ–ª–± 2
                            </div>
                        </div>
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input type="radio" name="type-stolbi" id="type-stolbi-3" value="var-3">
                                <label for="type-stolbi-3">
                                    <img src="../stolb/st3 .webp" alt="–°—Ç–æ–ª–± 3" style="width: 100%; height: 100%; object-fit: contain;">
                                </label>
                            </div>
                            <div style="text-align: center; margin-top: 5px; font-size: 13px; color: #666;">
                                <strong>3.</strong> –°—Ç–æ–ª–± 3
                            </div>
                        </div>
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input type="radio" name="type-stolbi" id="type-stolbi-4" value="var-4">
                                <label for="type-stolbi-4">
                                    <img src="../stolb/st4.webp" alt="–°—Ç–æ–ª–± 4" style="width: 100%; height: 100%; object-fit: contain;">
                                </label>
                            </div>
                            <div style="text-align: center; margin-top: 5px; font-size: 13px; color: #666;">
                                <strong>4.</strong> –°—Ç–æ–ª–± 4
                            </div>
                        </div>
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input type="radio" name="type-stolbi" id="type-stolbi-5" value="var-5">
                                <label for="type-stolbi-5">
                                    <img src="../stolb/st5.webp" alt="–°—Ç–æ–ª–± 5" style="width: 100%; height: 100%; object-fit: contain;">
                                </label>
                            </div>
                            <div style="text-align: center; margin-top: 5px; font-size: 13px; color: #666;">
                                <strong>5.</strong> –° –ø–æ–¥–ø—è—Ç–Ω–∏–∫–æ–º<br><span style="font-size: 11px; color: #999;">(–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π)</span>
                            </div>
                        </div>
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input type="radio" name="type-stolbi" id="type-stolbi-6" value="var-6">
                                <label for="type-stolbi-6">
                                    <img src="../stolb/st6.webp" alt="–°—Ç–æ–ª–± 6" style="width: 100%; height: 100%; object-fit: contain;">
                                </label>
                            </div>
                            <div style="text-align: center; margin-top: 5px; font-size: 13px; color: #666;">
                                <strong>6.</strong> –°—Ç–æ–ª–± 6
                            </div>
                        </div>
                    </div>

                    <div class="label_cl fz18 fw600 mb-20 debug-braces-hidden">–†–∞—Å–∫–æ—Å—ã</div>
                    <div class="type-row-raido debug-braces-hidden">
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input checked type="radio" name="type-raskosi" id="type-raskosi-var-1">
                                <label for="type-raskosi-var-1">
                                    <img src="../raskos/1 (1).webp" alt="–†–∞—Å–∫–æ—Å 1" style="width: 60px; height: 60px; object-fit: cover;">
                                </label>
                            </div>
                        </div>
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input type="radio" name="type-raskosi" id="type-raskosi-var-2">
                                <label for="type-raskosi-var-2">
                                    <img src="../raskos/2 (1).webp" alt="–†–∞—Å–∫–æ—Å 2" style="width: 60px; height: 60px; object-fit: cover;">
                                </label>
                            </div>
                        </div>
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input type="radio" name="type-raskosi" id="type-raskosi-var-3">
                                <label for="type-raskosi-var-3">
                                    <img src="../raskos/3 (1).webp" alt="–†–∞—Å–∫–æ—Å 3" style="width: 60px; height: 60px; object-fit: cover;">
                                </label>
                            </div>
                        </div>
                        <div class="type-row-raido-col">
                            <div class="raido-image">
                                <input type="radio" name="type-raskosi" id="type-raskosi-var-4">
                                <label for="type-raskosi-var-4">
                                    <img src="../raskos/4 (1).webp" alt="–†–∞—Å–∫–æ—Å 4" style="width: 60px; height: 60px; object-fit: cover;">
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="label_cl">–®–∞–≥ —Å—Ç–æ–ª–±–æ–≤</div>
                    <div class="slider-description mb-10">
                        <span class="description-text">–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å—Ç–æ–ª–±–∞–º–∏ –Ω–∞–≤–µ—Å–∞</span>
                    </div>
                    <dl>
                        <dt class="name">—à–∞–≥ —Å—Ç–æ–ª–±–æ–≤, –º</dt>
                        <dd class="has-slider" data-min="1.0" data-max="3.5" data-value="2.5">
                            <div class="ot">–æ—Ç<br>1.0–º</div>
                            <div class="value"><span>2.5</span>–º</div>
                            <div class="do">–¥–æ<br>3.5–º</div>
                            <div class="ui-container">
                                <input type="range" class="slider" min="10" max="35" step="1" value="25" id="columnStep">
                            </div>
                        </dd>
                    </dl>
                </div>
            </div>
        </section>

        <!-- –£—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–∞—Ä–∫–∞—Å–∞ -->
        <section class="frame-params-refinement">
            <div class="calculator-hide-date mb-10 mb-0m">
                <div class="triger-open flex aic jcsb f2 fz22 fw600 lh110 ttu pointer">—É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–∞—Ä–∫–∞—Å–∞
                    <div class="arrow flex aic jcc bg-red round-7">‚ñº</div>
                </div>
                <div class="calculator-hide-info hide_cl pt-40">
                    <!-- –ë–ª–æ–∫ –ö–∞—Ä–∫–∞—Å -->
                    <div class="f2 fz16 fw600 lh140 ttu mb-30">–ö–∞—Ä–∫–∞—Å</div>
                    <div class="field-row flex fxww mb-40">
                        <div class="field-col">
                            <div class="label_cl fz18 fw600 mb-20">–ú–∞—Ç–µ—Ä–∏–∞–ª –∫–∞—Ä–∫–∞—Å–∞</div>
                            <select class="select" id="frameMaterial">
                                <option value="pine">–°–æ—Å–Ω–∞</option>
                                <option value="larch">–õ–∏—Å—Ç–≤–µ–Ω–Ω–∏—Ü–∞</option>
                                <option value="oak">–î—É–±</option>
                                <option value="spruce">–ï–ª—å</option>
                            </select>
                        </div>
                        <div class="field-col">
                            <div class="label_cl fz18 fw600 mb-20">–ú–∞—Ç–µ—Ä–∏–∞–ª —Å—Ç–æ–ª–±–æ–≤</div>
                            <select class="select" id="postMaterial">
                                <option value="glued-100x100">–ö–ª–µ–µ–Ω—ã–π –±—Ä—É—Å 100√ó100√ó6000 –º–º</option>
                                <option value="glued-200x200">–ö–ª–µ–µ–Ω—ã–π –±—Ä—É—Å 200√ó200√ó6000 –º–º</option>
                                <option value="glued-240x140">–ö–ª–µ–µ–Ω—ã–π –±—Ä—É—Å 240√ó140 –º–º</option>
                                <option value="glued-150x150">–ö–ª–µ–µ–Ω—ã–π –±—Ä—É—Å 150√ó150√ó6000 –º–º</option>
                                <option value="planed-90x90">–°—Ç—Ä–æ–≥–∞–Ω—ã–π –±—Ä—É—Å 90√ó90√ó6000 –º–º</option>
                                <option value="planed-140x140">–°—Ç—Ä–æ–≥–∞–Ω—ã–π –±—Ä—É—Å 140√ó140√ó6000 –º–º</option>
                                <option value="planed-190x190">–°—Ç—Ä–æ–≥–∞–Ω—ã–π –±—Ä—É—Å 190√ó190√ó6000 –º–º</option>
                            </select>
                        </div>
                        <div class="field-col">
                            <div class="label_cl fz18 fw600 mb-20">–ú–∞—Ç–µ—Ä–∏–∞–ª —Ñ–µ—Ä–º</div>
                            <select class="select" id="trussMaterial">
                                <option value="planed-45x190">–°—Ç—Ä–æ–≥–∞–Ω–∞—è –¥–æ—Å–∫–∞ 45√ó190 –º–º</option>
                                <option value="planed-35x190">–°—Ç—Ä–æ–≥–∞–Ω–∞—è –¥–æ—Å–∫–∞ 35√ó190 –º–º</option>
                                <option value="planed-50x150">–°—Ç—Ä–æ–≥–∞–Ω–∞—è –¥–æ—Å–∫–∞ 50√ó150 –º–º</option>
                            </select>
                        </div>
                    </div>
                    <div class="field-row">
                        <div class="field-col">
                            <div class="label_cl fz18 fw600 mb-20">–û–∫—Ä–∞—Å</div>
                            <select class="select" id="frameColoring">
                                <option value="no-coloring">–ë–µ–∑ –æ–∫—Ä–∞—Å–∞</option>
                                <option value="neomid">Neomid, –ø—Ä–æ–ø–∏—Ç–∫–∞</option>
                                <option value="texturol-landscape">–¢–µ–∫—Å—Ç—É—Ä–æ–ª –õ–∞–Ω–¥—à–∞—Ñ—Ç, –ø–æ–ª—É—É–∫—Ä—ã–≤–Ω–∞—è, –ø–æ–ª—É–º–∞—Ç–æ–≤–∞—è (—Å–≤–µ—Ç–ª—ã–µ RAL, –∑–∞–≤–æ–¥—Å–∫–∏–µ —Ü–≤–µ—Ç–∞)</option>
                                <option value="texturol-country">–¢–µ–∫—Å—Ç—É—Ä–æ–ª –ö–∞–Ω—Ç—Ä–∏, —É–∫—Ä—ã–≤–Ω–∞—è, –ø–æ–ª—É–º–∞—Ç–æ–≤–∞—è (–ª—é–±—ã–µ —Ü–≤–µ—Ç–∞ –ø–æ RAL)</option>
                                <option value="symphony-wood-guard">Symphony wood-guard, –ø–æ–ª—É–º–∞—Ç–æ–≤–∞—è</option>
                                <option value="olsta">Olsta, –º–∞—Ç–æ–≤–∞—è</option>
                                <option value="tikkurila">Tikkurila</option>
                            </select>
                        </div>
                    </div>
                    <div class="field-row">
                        <div class="field-col">
                            <div class="slider-description mb-10">
                                <span class="description-text">–í—ã—Å—Ç—É–ø –±–∞–ª–∫–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –ø–µ—Ä–µ–¥–Ω–∏—Ö —Å—Ç–æ–ª–±–æ–≤</span>
                            </div>
                            <dl>
                                <dt class="name">–≤—ã–ø—É—Å–∫ –±–∞–ª–∫–∏ —Å–ø–µ—Ä–µ–¥–∏, –º–º</dt>
                                <dd class="has-slider" data-min="0" data-max="500" data-value="200">
                                    <div class="ot">–æ—Ç<br>0–º–º</div>
                                    <div class="value"><span>200</span>–º–º</div>
                                    <div class="do">–¥–æ<br>500–º–º</div>
                                    <div class="ui-container">
                                        <input type="range" class="slider" min="0" max="500" step="10" value="200" id="frontBeamExtension">
                                    </div>
                                </dd>
                            </dl>
                        </div>
                        <div class="field-col">
                            <div class="slider-description mb-10">
                                <span class="description-text">–í—ã—Å—Ç—É–ø –±–∞–ª–∫–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∑–∞–¥–Ω–∏—Ö —Å—Ç–æ–ª–±–æ–≤</span>
                            </div>
                            <dl>
                                <dt class="name">–≤—ã–ø—É—Å–∫ –±–∞–ª–∫–∏ —Å–∑–∞–¥–∏, –º–º</dt>
                                <dd class="has-slider" data-min="0" data-max="500" data-value="200">
                                    <div class="ot">–æ—Ç<br>0–º–º</div>
                                    <div class="value"><span>200</span>–º–º</div>
                                    <div class="do">–¥–æ<br>500–º–º</div>
                                    <div class="ui-container">
                                        <input type="range" class="slider" min="0" max="500" step="10" value="200" id="backBeamExtension">
                                    </div>
                                </dd>
                            </dl>
                        </div>
                    </div>

                    <!-- –ë–ª–æ–∫ –ö—Ä–æ–≤–ª—è -->
                    <div class="f2 fz16 fw600 lh140 ttu mb-30">–ö—Ä–æ–≤–ª—è</div>
                    <div class="field-row flex fxww mb-40">
                        <div class="field-col">
                            <div class="label_cl fz18 fw600 mb-20">–ú–∞—Ç–µ—Ä–∏–∞–ª –∫—Ä–æ–≤–ª–∏</div>
                            <select class="select" id="roofingMaterial">
                                <option value="metal-grandline" selected>–ú–µ—Ç–∞–ª–ª–æ—á–µ—Ä–µ–ø–∏—Ü–∞ Grand Line 0.45 –º–º + —Å–Ω–µ–≥–æ–∑–∞–¥–µ—Ä–∂–∞—Ç–µ–ª–∏</option>
                                <option value="shinglas-sonata">–ì–∏–±–∫–∞—è —á–µ—Ä–µ–ø–∏—Ü–∞ Shinglas –§–∏–Ω—Å–∫–∞—è –°–æ–Ω–∞—Ç–∞</option>
                                <option value="profiled-gl35r">–ö—Ä–æ–≤–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–Ω–∞—Å—Ç–∏–ª GL 35R</option>
                                <option value="polycarbonate-8mm">–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –ø–æ–ª–∏–∫–∞—Ä–±–æ–Ω–∞—Ç, 8 –º–º</option>
                                <option value="no-roofing">–ë–µ–∑ –∫—Ä–æ–≤–ª–∏</option>
                            </select>
                        </div>
                        <div class="field-col">
                            <div class="label_cl fz18 fw600 mb-20">–¶–≤–µ—Ç –∫—Ä–æ–≤–ª–∏</div>
                            <select class="select" id="roofColor">
                                <option value="amber">–Ø–Ω—Ç–∞—Ä—å</option>
                                <option value="blue">–°–∏–Ω–∏–π</option>
                                <option value="green">–ó–µ–ª–µ–Ω—ã–π</option>
                                <option value="red">–ö—Ä–∞—Å–Ω—ã–π</option>
                                <option value="brown">–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π</option>
                                <option value="gray">–°–µ—Ä—ã–π</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–≤–µ—Å–∞ -->
    <section class="specification" id="smeta">
        <h2>—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–≤–µ—Å–∞</h2>
        <div class="mb-30">
            <dl>
                <dt class="flex aic f2 pointer">
                    <div class="num">01.</div>
                    <div class="name">–æ–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</div>
                    <div class="arrow">‚ñº</div>
                </dt>
                <dd>
                    <ul>
                        <li>
                            <div class="num">1.1</div>
                            <div class="parameter">–¢–∏–ø –Ω–∞–≤–µ—Å–∞</div>
                            <div class="value" id="specRoofType">–î–≤—É—Å–∫–∞—Ç–Ω—ã–π</div>
                        </li>
                        <li>
                            <div class="num">1.2</div>
                            <div class="parameter">–ú–∞—Ç–µ—Ä–∏–∞–ª –∫–∞—Ä–∫–∞—Å–∞</div>
                            <div class="value" id="specFrameMaterial">–°–æ—Å–Ω–∞</div>
                        </li>
                        <li>
                            <div class="num">1.3</div>
                            <div class="parameter">–ú–∞—Ç–µ—Ä–∏–∞–ª –∫—Ä–æ–≤–ª–∏</div>
                            <div class="value" id="specRoofingMaterial">–ú–µ—Ç–∞–ª–ª–æ—á–µ—Ä–µ–ø–∏—Ü–∞</div>
                        </li>
                        <li>
                            <div class="num">1.4</div>
                            <div class="parameter">–¶–≤–µ—Ç –∫—Ä–æ–≤–ª–∏</div>
                            <div class="value" id="specRoofColor">–Ø–Ω—Ç–∞—Ä—å</div>
                        </li>
                        <li>
                            <div class="num">1.5</div>
                            <div class="parameter">–ü–ª–æ—â–∞–¥—å</div>
                            <div class="value" id="specArea">66.0–º¬≤</div>
                        </li>
                        <li>
                            <div class="num">1.6</div>
                            <div class="parameter">–®–∏—Ä–∏–Ω–∞ –ø–æ –æ—Å—è–º</div>
                            <div class="value" id="specWidth">6 000 –º–º</div>
                        </li>
                        <li>
                            <div class="num">1.7</div>
                            <div class="parameter">–î–ª–∏–Ω–∞ –ø–æ —Ä–∏–≥–µ–ª—é</div>
                            <div class="value" id="specLength">11 400 –º–º</div>
                        </li>
                        <li>
                            <div class="num">1.8</div>
                            <div class="parameter">–í—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±–æ–≤</div>
                            <div class="value" id="specHeight">3 000 –º–º</div>
                        </li>
                        <li>
                            <div class="num">1.9</div>
                            <div class="parameter">–í—ã—Å–æ—Ç–∞ —Å–∫–∞—Ç–æ–≤</div>
                            <div class="value" id="specRoofHeight">1 500 –º–º</div>
                        </li>
                        <li>
                            <div class="num">1.10</div>
                            <div class="parameter">–®–∞–≥ —Å—Ç–æ–ª–±–æ–≤</div>
                            <div class="value" id="specPostSpacing">2 500 –º–º</div>
                        </li>
                    </ul>
                </dd>
            </dl>
            <dl>
                <dt class="flex aic f2 pointer">
                    <div class="num">02.</div>
                    <div class="name">—Å—Ç–æ–ª–±—ã</div>
                    <div class="arrow">‚ñº</div>
                </dt>
                <dd>
                    <ul>
                        <li>
                            <div class="num">2.1</div>
                            <div class="parameter">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±–æ–≤</div>
                            <div class="value" id="specPosts">10 —à—Ç.</div>
                        </li>
                        <li>
                            <div class="num">2.2</div>
                            <div class="parameter">–¢–∏–ø —Å—Ç–æ–ª–±–æ–≤</div>
                            <div class="value" id="specPostType">–ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –±—Ä—É—Å</div>
                        </li>
                        <li>
                            <div class="num">2.3</div>
                            <div class="parameter">–ú–∞—Ç–µ—Ä–∏–∞–ª —Å—Ç–æ–ª–±–æ–≤</div>
                            <div class="value" id="specPostMaterial">–°–æ—Å–Ω–∞</div>
                        </li>
                        <li>
                            <div class="num">2.4</div>
                            <div class="parameter">–í—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±–æ–≤ —Å–ª–µ–≤–∞</div>
                            <div class="value" id="specHeightLeft">3 000 –º–º</div>
                        </li>
                        <li>
                            <div class="num">2.5</div>
                            <div class="parameter">–í—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±–æ–≤ —Å–ø—Ä–∞–≤–∞</div>
                            <div class="value" id="specHeightRight">3 000 –º–º</div>
                        </li>
                        <li>
                            <div class="num">2.6</div>
                            <div class="parameter">–°–µ—á–µ–Ω–∏–µ —Å—Ç–æ–ª–±–æ–≤</div>
                            <div class="value" id="specPostSection">150 x 150 –º–º</div>
                        </li>
                    </ul>
                </dd>
            </dl>
            <dl>
                <dt class="flex aic f2 pointer">
                    <div class="num">03.</div>
                    <div class="name">–§–µ—Ä–º—ã</div>
                    <div class="arrow">‚ñº</div>
                </dt>
                <dd>
                    <ul>
                        <li>
                            <div class="num">3.1</div>
                            <div class="parameter">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–µ—Ä–º</div>
                            <div class="value" id="specFarms">5 —à—Ç.</div>
                        </li>
                        <li>
                            <div class="num">3.2</div>
                            <div class="parameter">–ú–∞—Ç–µ—Ä–∏–∞–ª —Ñ–µ—Ä–º</div>
                            <div class="value" id="specTrussMaterial">–°—Ç—Ä–æ–≥–∞–Ω–∞—è –¥–æ—Å–∫–∞ 45√ó190 –º–º</div>
                        </li>
                        <li>
                            <div class="num">3.3</div>
                            <div class="parameter">–î–ª–∏–Ω–∞ —Ñ–µ—Ä–º—ã</div>
                            <div class="value" id="specFarmLength">6 000 –º–º</div>
                        </li>
                        <li>
                            <div class="num">3.4</div>
                            <div class="parameter">–®–∞–≥ —Ñ–µ—Ä–º</div>
                            <div class="value" id="specTrussSpacing">2 500 –º–º</div>
                        </li>
                    </ul>
                </dd>
            </dl>
            <dl class="debug-braces-hidden">
                <dt class="flex aic f2 pointer">
                    <div class="num">04.</div>
                    <div class="name">–†–∞—Å–∫–æ—Å—ã</div>
                    <div class="arrow">‚ñº</div>
                </dt>
                <dd>
                    <ul>
                        <li>
                            <div class="num">4.1</div>
                            <div class="parameter">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—Å–∫–æ—Å–æ–≤</div>
                            <div class="value" id="specBraces">20 —à—Ç.</div>
                        </li>
                        <li>
                            <div class="num">4.2</div>
                            <div class="parameter">–¢–∏–ø —Ä–∞—Å–∫–æ—Å–æ–≤</div>
                            <div class="value" id="specBraceType">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π</div>
                        </li>
                        <li>
                            <div class="num">4.3</div>
                            <div class="parameter">–ú–∞—Ç–µ—Ä–∏–∞–ª —Ä–∞—Å–∫–æ—Å–æ–≤</div>
                            <div class="value" id="specBraceMaterial">–°–æ—Å–Ω–∞</div>
                        </li>
                        <li>
                            <div class="num">4.4</div>
                            <div class="parameter">–°–µ—á–µ–Ω–∏–µ —Ä–∞—Å–∫–æ—Å–æ–≤</div>
                            <div class="value">50 x 100 –º–º</div>
                        </li>
                        <li>
                            <div class="num">4.5</div>
                            <div class="parameter">–î–ª–∏–Ω–∞ —Ä–∞—Å–∫–æ—Å–æ–≤</div>
                            <div class="value">1 500 –º–º</div>
                        </li>
                    </ul>
                </dd>
            </dl>
        </div>
    </section>
    </div>
    
    <script type="module" src="/naves-calc/assets/js/naves-calc.bundle.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            window.NavesCalc.init('#nc-form', '#nc-canvas', '#nc-summary');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –±–ª–æ–∫–æ–≤
            initCollapsibleBlocks();
            
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            syncDefaultValues();
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–æ–ª—â–∏–Ω—É —Å—Ç–æ–ª–±–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ—á–µ–Ω–∏—è
            setTimeout(() => {
                updatePostThickness();
            }, 100);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π
            initCameraControls();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –∑–∞–∫–∞–∑–∞ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            initOrderFunctions();
            
            // –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            PerformanceOptimizer.optimizeForDevice();
        });
        
        function initCollapsibleBlocks() {
            // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –±–ª–æ–∫–∏ —Å –∫–ª–∞—Å—Å–æ–º triger-open
            const triggerElements = document.querySelectorAll('.triger-open');
            
            triggerElements.forEach(trigger => {
                trigger.addEventListener('click', function() {
                    const infoBlock = this.nextElementSibling;
                    const arrow = this.querySelector('.arrow');
                    
                    if (infoBlock && infoBlock.classList.contains('calculator-hide-info')) {
                        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–ª–∞—Å—Å—ã
                        this.classList.toggle('active');
                        infoBlock.classList.toggle('active');
                        
                        // –ê–Ω–∏–º–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∏
                        if (arrow) {
                            arrow.style.transform = this.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
                        }
                    }
                });
            });
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–∞–π–¥–µ—Ä–æ–≤
            initSliders();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ–ª–µ–∫—Ç–æ–≤
            initSelects();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫
            initRadioButtons();
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        }
        
        // –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        const PerformanceOptimizer = {
            debounceTimers: new Map(),
            updateQueue: new Set(),
            
            // Debounced –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–æ–≤
            debouncedUpdate(sliderId, callback, delay = 300) {
                // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä
                if (this.debounceTimers.has(sliderId)) {
                    clearTimeout(this.debounceTimers.get(sliderId));
                }
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
                const timer = setTimeout(() => {
                    try {
                        callback();
                        this.debounceTimers.delete(sliderId);
                    } catch (error) {
                        console.error('–û—à–∏–±–∫–∞ –≤ debounced –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:', error);
                    }
                }, delay);
                
                this.debounceTimers.set(sliderId, timer);
            },
            
            // Batch –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            batchUpdate(updateFn) {
                this.updateQueue.add(updateFn);
                
                // –í—ã–ø–æ–ª–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –∫–∞–¥—Ä–µ
                requestAnimationFrame(() => {
                    this.updateQueue.forEach(fn => {
                        try {
                            fn();
                        } catch (error) {
                            console.error('–û—à–∏–±–∫–∞ –≤ batch –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:', error);
                        }
                    });
                    this.updateQueue.clear();
                });
            },
            
            // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            optimizeForDevice() {
                const isLowEnd = navigator.hardwareConcurrency <= 2 || 
                                navigator.deviceMemory <= 4 ||
                                /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                if (isLowEnd) {
                    console.log('–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å–ª–∞–±–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –ø—Ä–∏–º–µ–Ω—è–µ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏...');
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                    if (window.NavesCalc) {
                        window.NavesCalc.qualityLevel = 'low';
                        window.NavesCalc.setQualityLevelManual('low');
                    }
                    
                    // –£–º–µ–Ω—å—à–∞–µ–º —á–∞—Å—Ç–æ—Ç—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
                    this.debounceDelay = 500;
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
                    const panel = document.getElementById('performance-panel');
                    if (panel && window.innerWidth < 768) {
                        panel.classList.add('hidden');
                    }
                }
                
                return isLowEnd;
            }
        };
        
        function initSliders() {
            const sliders = document.querySelectorAll('.slider');
            
            sliders.forEach(slider => {
                slider.addEventListener('input', function() {
                    const valueSpan = this.closest('.has-slider').querySelector('.value span');
                    if (!valueSpan) return;
                    
                    // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                    let displayValue = this.value;
                    
                    if (this.id === 'columnStep') {
                        displayValue = (this.value / 10).toFixed(1);
                    }
                    
                    valueSpan.textContent = displayValue;
                    
                    // Debounced –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 3D –º–æ–¥–µ–ª–∏
                    PerformanceOptimizer.debouncedUpdate(this.id, () => {
                        try {
                            updateSliderValue(this);
                        } catch (error) {
                            console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–∞:', error);
                            showError('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞');
                        }
                    }, PerformanceOptimizer.debounceDelay || 300);
                });
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
        function updateSliderValue(slider) {
            if (!window.NavesCalc) {
                console.warn('NavesCalc –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');
                return;
            }
            
            const value = parseInt(slider.value);
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
            if (isNaN(value) || value < 0) {
                console.error('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–ª–∞–π–¥–µ—Ä–∞:', slider.value);
                return;
            }
            
            try {
                switch (slider.id) {
                    case 'columnStep':
                        window.NavesCalc.currentPostSpacing = value / 10;
                        break;
                    case 'frontBeamExtension':
                        window.NavesCalc.params.frontBeamExtension = value;
                        break;
                    case 'backBeamExtension':
                        window.NavesCalc.params.backBeamExtension = value;
                        break;
                }
                
                // Batch –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                PerformanceOptimizer.batchUpdate(() => {
                    if (window.NavesCalc.update3DModel) {
                        window.NavesCalc.update3DModel();
                    }
                    if (window.NavesCalc.calculateTotal) {
                        window.NavesCalc.calculateTotal();
                    }
                    if (window.NavesCalc.updateSpecification) {
                        window.NavesCalc.updateSpecification();
                    }
                });
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:', error);
                showError('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞');
            }
        }
        
        // –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
        function showError(message) {
            // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #ff4444;
                color: white;
                padding: 10px 15px;
                border-radius: 5px;
                z-index: 10000;
                font-size: 14px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }
        
        function initSelects() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
            const frameMaterialSelect = document.getElementById('frameMaterial');
            const postMaterialSelect = document.getElementById('postMaterial');
            const trussMaterialSelect = document.getElementById('trussMaterial');
            const braceTypeSelect = document.getElementById('braceType');
            const frameColoringSelect = document.getElementById('frameColoring');
            const roofingMaterialSelect = document.getElementById('roofingMaterial');
            const roofColorSelect = document.getElementById('roofColor');
            
            if (frameMaterialSelect) {
                frameMaterialSelect.addEventListener('change', function() {
                    if (window.NavesCalc) {
                        window.NavesCalc.params.frameMaterial = this.value;
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        window.NavesCalc.updateSpecification();
                    }
                });
            }
            
            if (postMaterialSelect) {
                postMaterialSelect.addEventListener('change', function() {
                    if (window.NavesCalc) {
                        window.NavesCalc.params.postMaterial = this.value;
                        updatePostThickness(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—â–∏–Ω—É —Å—Ç–æ–ª–±–∞ var-5
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        window.NavesCalc.updateSpecification();
                    }
                });
            }
            
            if (trussMaterialSelect) {
                trussMaterialSelect.addEventListener('change', function() {
                    if (window.NavesCalc) {
                        window.NavesCalc.params.trussMaterial = this.value;
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        window.NavesCalc.updateSpecification();
                    }
                });
            }
            
            if (braceTypeSelect) {
                braceTypeSelect.addEventListener('change', function() {
                    if (window.NavesCalc) {
                        window.NavesCalc.params.braceType = this.value;
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        window.NavesCalc.updateSpecification();
                    }
                });
            }
            
            if (frameColoringSelect) {
                frameColoringSelect.addEventListener('change', function() {
                    if (window.NavesCalc) {
                        window.NavesCalc.params.frameColoring = this.value;
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        window.NavesCalc.updateSpecification();
                    }
                });
            }
            
            if (roofingMaterialSelect) {
                roofingMaterialSelect.addEventListener('change', function() {
                    if (window.NavesCalc) {
                        window.NavesCalc.params.roofingMaterial = this.value;
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        window.NavesCalc.updateSpecification();
                    }
                });
            }
            
            if (roofColorSelect) {
                roofColorSelect.addEventListener('change', function() {
                    if (window.NavesCalc) {
                        window.NavesCalc.params.roofColor = this.value;
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        window.NavesCalc.updateSpecification();
                    }
                });
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–ª—â–∏–Ω—ã —Å—Ç–æ–ª–±–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ—á–µ–Ω–∏—è —Å—Ç–æ–ª–±–æ–≤
        function updatePostThickness() {
            if (!window.NavesCalc || !window.NavesCalc.params) return;
            
            const postType = window.NavesCalc.params.postType;
            const postMaterial = window.NavesCalc.params.postMaterial;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–æ–ª—â–∏–Ω—É –¥–ª—è —Å—Ç–æ–ª–±–æ–≤ —Å –ø–æ–¥–ø—è—Ç–Ω–∏–∫–æ–º –∏–ª–∏ –∫–∞–ø–∏—Ç–µ–ª—å—é
            if (postMaterial) {
                // –ò–∑–≤–ª–µ–∫–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –∏–∑ –∑–Ω–∞—á–µ–Ω–∏—è postMaterial (–Ω–∞–ø—Ä–∏–º–µ—Ä, "glued-150x150" -> 150)
                const sizeMatch = postMaterial.match(/(\d+)x(\d+)/);
                if (sizeMatch) {
                    const width = parseFloat(sizeMatch[1]);
                    const height = parseFloat(sizeMatch[2]);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ NavesCalc
                    window.NavesCalc.params.postWidth = width / 1000; // –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –º–µ—Ç—Ä—ã
                    window.NavesCalc.params.postDepth = height / 1000; // –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –º–µ—Ç—Ä—ã
                    
                    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–ø—è—Ç–Ω–∏–∫–∞ (–¥–ª—è var-5, var-4)
                    const footOverhang = 40; // –≤—ã—Å—Ç—É–ø —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –≤ –º–º
                    const footThickness = 40; // —Ç–æ–ª—â–∏–Ω–∞ –ø—è—Ç–∫–∏ –≤ –º–º
                    
                    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–ø–∏—Ç–µ–ª–∏ (–¥–ª—è var-3, var-4)
                    const capitalOverhang = 50; // —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –≤ –º–º
                    const capitalThickness = 80; // –≤—ã—Å–æ—Ç–∞ –∫–∞–ø–∏—Ç–µ–ª–∏ –≤ –º–º
                    
                    if (postType === 'var-5' || postType === 'var-4') {
                        window.NavesCalc.params.postFootWidth = (width + footOverhang * 2) / 1000; // –≤ –º–µ—Ç—Ä–∞—Ö
                        window.NavesCalc.params.postFootDepth = (height + footOverhang * 2) / 1000; // –≤ –º–µ—Ç—Ä–∞—Ö
                        window.NavesCalc.params.postFootHeight = footThickness / 1000; // –≤ –º–µ—Ç—Ä–∞—Ö
                        console.log(`–ü–æ–¥–ø—è—Ç–Ω–∏–∫ —Å—Ç–æ–ª–±–∞ ${postType}: ${width + footOverhang * 2}x${height + footOverhang * 2}x${footThickness} –º–º`);
                    }
                    
                    if (postType === 'var-3' || postType === 'var-4') {
                        window.NavesCalc.params.postCapitalWidth = (width + capitalOverhang * 2) / 1000; // –≤ –º–µ—Ç—Ä–∞—Ö
                        window.NavesCalc.params.postCapitalDepth = (height + capitalOverhang * 2) / 1000; // –≤ –º–µ—Ç—Ä–∞—Ö
                        window.NavesCalc.params.postCapitalHeight = capitalThickness / 1000; // –≤ –º–µ—Ç—Ä–∞—Ö
                        console.log(`–ö–∞–ø–∏—Ç–µ–ª—å —Å—Ç–æ–ª–±–∞ ${postType}: ${width + capitalOverhang * 2}x${height + capitalOverhang * 2}x${capitalThickness} –º–º`);
                    }
                    
                    console.log(`–°–µ—á–µ–Ω–∏–µ —Å—Ç–æ–ª–±–∞ ${postType}: ${width}x${height} –º–º`);
                }
            }
        }
        
        function initRadioButtons() {
            console.log('=== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –†–ê–î–ò–û–ö–ù–û–ü–û–ö ===');
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞ —Å—Ç–æ–ª–±–æ–≤
            const stolbiRadios = document.querySelectorAll('input[name="type-stolbi"]');
            
            console.log('–ù–∞–π–¥–µ–Ω–æ —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫ —Å—Ç–æ–ª–±–æ–≤:', stolbiRadios.length);
            
            stolbiRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.checked && window.NavesCalc) {
                        window.NavesCalc.params.postType = this.value;
                        console.log('–í—ã–±—Ä–∞–Ω —Ç–∏–ø —Å—Ç–æ–ª–±–∞:', this.value);
                        updatePostThickness(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—â–∏–Ω—É —Å—Ç–æ–ª–±–∞
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        window.NavesCalc.updateSpecification();
                    }
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞ —Ä–∞—Å–∫–æ—Å–æ–≤
            const raskosiRadios = document.querySelectorAll('input[name="type-raskosi"]');
            
            console.log('–ù–∞–π–¥–µ–Ω–æ —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫ —Ä–∞—Å–∫–æ—Å–æ–≤:', raskosiRadios.length);
            
            raskosiRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.checked && window.NavesCalc) {
                        window.NavesCalc.params.braceType = this.id.replace('type-raskosi-var-', 'var-');
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        window.NavesCalc.updateSpecification();
                    }
                });
            });
        }
        
        function syncDefaultValues() {
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å HTML —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
            if (window.NavesCalc) {
                const params = window.NavesCalc.params;
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ–≤
                const frameMaterialSelect = document.getElementById('frameMaterial');
                if (frameMaterialSelect) {
                    frameMaterialSelect.value = params.frameMaterial || 'pine';
                }
                
                const postMaterialSelect = document.getElementById('postMaterial');
                if (postMaterialSelect) {
                    postMaterialSelect.value = params.postMaterial || 'glued-150x150';
                }
                
                const trussMaterialSelect = document.getElementById('trussMaterial');
                if (trussMaterialSelect) {
                    trussMaterialSelect.value = params.trussMaterial || 'planed-45x190';
                }
                
                const braceTypeSelect = document.getElementById('braceType');
                if (braceTypeSelect) {
                    braceTypeSelect.value = params.braceType || 'var-1';
                }
                
                const frameColoringSelect = document.getElementById('frameColoring');
                if (frameColoringSelect) {
                    frameColoringSelect.value = params.frameColoring || 'no-coloring';
                }
                
                const roofingMaterialSelect = document.getElementById('roofingMaterial');
                if (roofingMaterialSelect) {
                    roofingMaterialSelect.value = params.roofingMaterial || 'metal-grandline';
                }
                
                const roofColorSelect = document.getElementById('roofColor');
                if (roofColorSelect) {
                    roofColorSelect.value = params.roofColor || 'amber';
                }
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–æ–≤
                const columnStepSlider = document.getElementById('columnStep');
                if (columnStepSlider) {
                    columnStepSlider.value = (params.postSpacing || 25) * 10; // –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –¥–µ—Ü–∏–º–µ—Ç—Ä—ã
                    const valueSpan = columnStepSlider.closest('.has-slider').querySelector('.value span');
                    if (valueSpan) {
                        valueSpan.textContent = (params.postSpacing || 25) / 10;
                    }
                }
                
                const frontBeamExtensionSlider = document.getElementById('frontBeamExtension');
                if (frontBeamExtensionSlider) {
                    frontBeamExtensionSlider.value = params.frontBeamExtension || 200;
                    const valueSpan = frontBeamExtensionSlider.closest('.has-slider').querySelector('.value span');
                    if (valueSpan) {
                        valueSpan.textContent = params.frontBeamExtension || 200;
                    }
                }
                
                const backBeamExtensionSlider = document.getElementById('backBeamExtension');
                if (backBeamExtensionSlider) {
                    backBeamExtensionSlider.value = params.backBeamExtension || 200;
                    const valueSpan = backBeamExtensionSlider.closest('.has-slider').querySelector('.value span');
                    if (valueSpan) {
                        valueSpan.textContent = params.backBeamExtension || 200;
                    }
                }
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∏–ø —Å—Ç–æ–ª–±–∞
                const postType = params.postType || 'var-5';
                const postRadio = document.getElementById(`type-stolbi-${postType}`);
                if (postRadio) {
                    postRadio.checked = true;
                }
            }
        }
        
        function initCameraControls() {
            // –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ –∫–∞–º–µ—Ä—ã
            const resetBtn = document.getElementById('reset-camera');
            if (resetBtn) {
                resetBtn.addEventListener('click', () => {
                    if (window.NavesCalc && window.NavesCalc.controls) {
                        window.NavesCalc.controls.reset();
                        window.NavesCalc.needsRender = true;
                    }
                });
            }
            
            // –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–∞ —Å–≤–µ—Ä—Ö—É
            const topViewBtn = document.getElementById('top-view');
            if (topViewBtn) {
                topViewBtn.addEventListener('click', () => {
                    if (window.NavesCalc && window.NavesCalc.camera && window.NavesCalc.controls) {
                        window.NavesCalc.camera.position.set(0, 20, 0);
                        window.NavesCalc.controls.target.set(0, 0, 0);
                        window.NavesCalc.controls.update();
                        window.NavesCalc.needsRender = true;
                    }
                });
            }
            
            // –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–∞ —Å–ø–µ—Ä–µ–¥–∏
            const frontViewBtn = document.getElementById('front-view');
            if (frontViewBtn) {
                frontViewBtn.addEventListener('click', () => {
                    if (window.NavesCalc && window.NavesCalc.camera && window.NavesCalc.controls) {
                        window.NavesCalc.camera.position.set(0, 5, 15);
                        window.NavesCalc.controls.target.set(0, 2, 0);
                        window.NavesCalc.controls.update();
                        window.NavesCalc.needsRender = true;
                    }
                });
            }
            
            // –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–∞ —Å–±–æ–∫—É
            const sideViewBtn = document.getElementById('side-view');
            if (sideViewBtn) {
                sideViewBtn.addEventListener('click', () => {
                    if (window.NavesCalc && window.NavesCalc.camera && window.NavesCalc.controls) {
                        window.NavesCalc.camera.position.set(15, 5, 0);
                        window.NavesCalc.controls.target.set(0, 2, 0);
                        window.NavesCalc.controls.update();
                        window.NavesCalc.needsRender = true;
                    }
                });
            }
        }
        
        function initOrderFunctions() {
            // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫–∞–∑–∞
            window.makeOrder = function() {
                const totalPrice = document.getElementById('totalPrice').textContent;
                alert(`–§—É–Ω–∫—Ü–∏—è –∑–∞–∫–∞–∑–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.\n–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${totalPrice}`);
            };
            
            // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å—á–µ—Ç–∞
            window.saveCalculation = function() {
                const totalPrice = document.getElementById('totalPrice').textContent;
                alert(`–§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.\n–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${totalPrice}`);
            };
            
            // –§—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è 3D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            window.download3DImage = function() {
                if (window.NavesCalc && window.NavesCalc.renderer) {
                    // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
                    const canvas = window.NavesCalc.renderer.domElement;
                    const link = document.createElement('a');
                    link.download = 'naves-3d-model.png';
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                } else {
                    alert('3D –º–æ–¥–µ–ª—å –Ω–µ –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è');
                }
            };
            
            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–∞–Ω–µ–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            window.togglePerformancePanel = function() {
                const panel = document.getElementById('performance-panel');
                const button = document.querySelector('.performance-toggle');
                
                if (panel.classList.contains('hidden')) {
                    panel.classList.remove('hidden');
                    button.textContent = '–°–∫—Ä—ã—Ç—å';
                } else {
                    panel.classList.add('hidden');
                    button.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å';
                }
            };
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–Ω–µ–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
            function initPerformancePanel() {
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–∞—á–µ—Å—Ç–≤–∞
                const qualityButtons = document.querySelectorAll('.quality-btn');
                qualityButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const quality = this.dataset.quality;
                        
                        // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                        qualityButtons.forEach(btn => btn.classList.remove('active'));
                        // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
                        this.classList.add('active');
                        
                        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∞—á–µ—Å—Ç–≤–æ –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ
                        if (window.NavesCalc) {
                            window.NavesCalc.setQualityLevelManual(quality);
                        }
                    });
                });
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                function updatePerformanceStats() {
                    if (window.NavesCalc) {
                        const stats = window.NavesCalc.getPerformanceStats();
                        
                        document.getElementById('fps-value').textContent = stats.fps;
                        document.getElementById('frame-time-value').textContent = stats.frameTime.toFixed(1) + 'ms';
                        document.getElementById('triangles-value').textContent = stats.triangleCount.toLocaleString();
                        document.getElementById('draw-calls-value').textContent = stats.drawCalls;
                        document.getElementById('quality-value').textContent = stats.qualityLevel.charAt(0).toUpperCase() + stats.qualityLevel.slice(1);
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 500ms
                    setTimeout(updatePerformanceStats, 500);
                }
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                updatePerformanceStats();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
            setTimeout(initPerformancePanel, 1000);
        }
        
        
        // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        window.PerformanceOptimizer = PerformanceOptimizer;
        
        // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –î–õ–Ø –û–¢–õ–ê–î–û–ß–ù–´–• –ö–ù–û–ü–û–ö
        function initDebugButtons() {
            console.log('=== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –û–¢–õ–ê–î–û–ß–ù–´–• –ö–ù–û–ü–û–ö ===');
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞ —Å—Ç–æ–ª–±–æ–≤
            const debugStolbiRadios = document.querySelectorAll('input[name="type-stolbi"]');
            
            console.log('–ù–∞–π–¥–µ–Ω–æ –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫ —Å—Ç–æ–ª–±–æ–≤:', debugStolbiRadios.length);
            
            debugStolbiRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.checked && window.NavesCalc) {
                        window.NavesCalc.params.postType = this.value;
                        console.log('–í—ã–±—Ä–∞–Ω —Ç–∏–ø —Å—Ç–æ–ª–±–∞ (–æ—Ç–ª–∞–¥–∫–∞):', this.value);
                        updatePostThickness(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—â–∏–Ω—É —Å—Ç–æ–ª–±–∞
                        window.NavesCalc.update3DModel();
                        window.NavesCalc.calculateTotal();
                        updateDebugInfo(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                    }
                });
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        function updateDebugInfo() {
            if (window.NavesCalc && window.NavesCalc.params) {
                const price = window.NavesCalc.calculateTotal();
                const dimensions = `${window.NavesCalc.params.length}x${window.NavesCalc.params.width} –º`;
                const height = `${window.NavesCalc.params.height} –º`;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –ø—Ä–æ–¥–æ–ª—å–Ω—ã—Ö –±–∞–ª–æ–∫ (–º–∞—É—ç—Ä–ª–∞—Ç–æ–≤) –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Å—Ç–æ–ª–±–∞
                const postType = window.NavesCalc.params.postType;
                let longitudinalBeamSize;
                if (postType === 'var-1' || postType === 'var-5') {
                    longitudinalBeamSize = '200√ó200 –º–º';
                } else {
                    // –î–ª—è var-2, var-3, var-4 –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ—á–µ–Ω–∏–µ —Å—Ç–æ–ª–±–æ–≤
                    const postMaterial = window.NavesCalc.params.postMaterial;
                    const match = postMaterial.match(/(\d+)x(\d+)/);
                    if (match) {
                        longitudinalBeamSize = `${match[1]}√ó${match[2]} –º–º`;
                    } else {
                        longitudinalBeamSize = '150√ó150 –º–º';
                    }
                }
                
                const priceEl = document.getElementById('debug-total-price');
                const dimensionsEl = document.getElementById('debug-dimensions');
                const heightEl = document.getElementById('debug-height');
                const longitudinalBeamEl = document.getElementById('debug-longitudinal-beam');
                
                if (priceEl) priceEl.textContent = price.toLocaleString() + ' ‚ÇΩ';
                if (dimensionsEl) dimensionsEl.textContent = dimensions;
                if (heightEl) heightEl.textContent = height;
                if (longitudinalBeamEl) longitudinalBeamEl.textContent = longitudinalBeamSize;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Å–µ—á–µ–Ω–∏—è –±–∞–ª–æ–∫
        window.selectBeam = function(element, value) {
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const allBeamItems = document.querySelectorAll('.debug-beam-item');
            allBeamItems.forEach(item => item.classList.remove('selected'));
            
            // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
            element.classList.add('selected');
            
            // –û—Ç–º–µ—á–∞–µ–º radio –∫–Ω–æ–ø–∫—É
            const radio = element.querySelector('input[type="radio"]');
            if (radio) {
                radio.checked = true;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ
            if (window.NavesCalc) {
                window.NavesCalc.params.trussMaterial = value;
                window.NavesCalc.update3DModel();
                window.NavesCalc.calculateTotal();
                window.NavesCalc.updateSpecification();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–º –±–ª–æ–∫–µ
                const beamSectionEl = document.getElementById('debug-beam-section');
                const sizeText = element.querySelector('.debug-beam-size').textContent;
                if (beamSectionEl) {
                    beamSectionEl.textContent = sizeText;
                }
                
                // –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–∫—Ä—ã—Ç—ã–π —Å–µ–ª–µ–∫—Ç –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
                const trussMaterialSelect = document.getElementById('trussMaterial');
                if (trussMaterialSelect) {
                    trussMaterialSelect.value = value;
                }
            }
            
            console.log('–í—ã–±—Ä–∞–Ω–æ —Å–µ—á–µ–Ω–∏–µ –±–∞–ª–æ–∫:', value);
        };
        
        // –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ —Ñ–µ—Ä–º (—Ñ–æ—Ä–º–∞ –∫—Ä–æ–≤–ª–∏)
        window.selectTrussType = function(element, value) {
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const allTrussItems = document.querySelectorAll('.debug-truss-item');
            allTrussItems.forEach(item => {
                item.style.border = '2px solid #ddd';
                item.style.background = 'transparent';
            });
            
            // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
            element.style.border = '2px solid #20B5B9';
            element.style.background = '#f0fbfb';
            
            // –û—Ç–º–µ—á–∞–µ–º radio –∫–Ω–æ–ø–∫—É
            const radio = element.querySelector('input[type="radio"]');
            if (radio) {
                radio.checked = true;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ
            if (window.NavesCalc) {
                window.NavesCalc.params.trussType = value;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏ —Ç–∏–ø–∞ —Ñ–µ—Ä–º
                const trussTypeRadios = document.querySelectorAll('input[name="type-karkas"]');
                trussTypeRadios.forEach(radio => {
                    if (radio.value === value) {
                        radio.checked = true;
                    }
                });
                
                // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –º–æ–¥–µ–ª—å
                window.NavesCalc.update3DModel();
                window.NavesCalc.calculateTotal();
                window.NavesCalc.updateSpecification();
            }
            
            console.log('–í—ã–±—Ä–∞–Ω —Ç–∏–ø —Ñ–µ—Ä–º:', value);
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ –±–∞–ª–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        function initBeamSelection() {
            const defaultBeamItem = document.querySelector('.debug-beam-item input[checked]');
            if (defaultBeamItem) {
                const parent = defaultBeamItem.closest('.debug-beam-item');
                if (parent) {
                    parent.classList.add('selected');
                }
            }
        }
        
        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ë–ï–ì–£–ù–ö–û–í (–ü–ê–†–ê–ú–ï–¢–†–´ –ö–û–ù–°–¢–†–£–ö–¶–ò–ò)
        function updateLength(value) {
            const meters = value / 10;
            document.getElementById('length-value').textContent = meters.toFixed(1) + ' –º';
            if (window.NavesCalc) {
                window.NavesCalc.params.length = parseInt(value);
                window.NavesCalc.update3DModel();
                window.NavesCalc.calculateTotal();
                updateDebugInfo();
            }
        }
        
        function updateWidth(value) {
            const meters = value / 10;
            document.getElementById('width-value').textContent = meters.toFixed(1) + ' –º';
            if (window.NavesCalc) {
                window.NavesCalc.params.width = parseInt(value);
                window.NavesCalc.update3DModel();
                window.NavesCalc.calculateTotal();
                updateDebugInfo();
            }
        }
        
        function updateHeight(value) {
            const meters = value / 10;
            document.getElementById('height-value').textContent = meters.toFixed(1) + ' –º';
            if (window.NavesCalc) {
                window.NavesCalc.params.height = parseInt(value);
                window.NavesCalc.update3DModel();
                window.NavesCalc.calculateTotal();
                updateDebugInfo();
            }
        }
        
        function updateRoofHeight(value) {
            const meters = value / 10;
            document.getElementById('roof-height-value').textContent = meters.toFixed(1) + ' –º';
            if (window.NavesCalc) {
                window.NavesCalc.params.roofHeight = parseInt(value);
                window.NavesCalc.update3DModel();
                window.NavesCalc.calculateTotal();
                updateDebugInfo();
            }
        }
        
        function updatePostSpacing(value) {
            const meters = value / 10;
            document.getElementById('post-spacing-value').textContent = meters.toFixed(1) + ' –º';
            if (window.NavesCalc) {
                window.NavesCalc.params.postSpacing = parseInt(value);
                window.NavesCalc.update3DModel();
                window.NavesCalc.calculateTotal();
                updateDebugInfo();
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ —Ñ–µ—Ä–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        function initTrussSelection() {
            const defaultTrussItem = document.querySelector('.debug-truss-item input[checked]');
            if (defaultTrussItem) {
                const parent = defaultTrussItem.closest('.debug-truss-item');
                if (parent) {
                    parent.style.border = '2px solid #20B5B9';
                    parent.style.background = '#f0fbfb';
                }
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initDebugButtons, 1000);
            setTimeout(initBeamSelection, 1100);
            setTimeout(initTrussSelection, 1150);
            setTimeout(updateDebugInfo, 1200); // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫
        });
    </script>
</body>
</html>


